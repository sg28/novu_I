'use strict';

var jsonSchemaFaker = require('json-schema-faker');
var liquidjs = require('liquidjs');
var Ue = require('ora');
require('cross-fetch');
var j = require('chalk');
var shared = require('@novu/shared');
var Ze = require('sanitize-html');
var Lt = require('ajv');
var jt = require('ajv-formats');
var zodToJsonSchema = require('zod-to-json-schema');
var crypto = require('crypto');

function _interopDefault (e) { return e && e.__esModule ? e : { default: e }; }

var Ue__default = /*#__PURE__*/_interopDefault(Ue);
var j__default = /*#__PURE__*/_interopDefault(j);
var Ze__default = /*#__PURE__*/_interopDefault(Ze);
var Lt__default = /*#__PURE__*/_interopDefault(Lt);
var jt__default = /*#__PURE__*/_interopDefault(jt);

var q=(i=>(i.TRIGGER="trigger",i.EXECUTE="execute",i.PREVIEW="preview",i))(q||{}),ee=(i=>(i.DISCOVER="discover",i.HEALTH_CHECK="health-check",i.CODE="code",i))(ee||{});var Ct=(t=>(t.SYNC="/v1/bridge/sync",t.DIFF="/v1/bridge/diff",t))(Ct||{}),$e=5,qe=1500;var Dt=(s=>(s.EVERY_SECOND="* * * * * *",s.EVERY_5_SECONDS="*/5 * * * * *",s.EVERY_10_SECONDS="*/10 * * * * *",s.EVERY_30_SECONDS="*/30 * * * * *",s.EVERY_MINUTE="*/1 * * * *",s.EVERY_5_MINUTES="0 */5 * * * *",s.EVERY_10_MINUTES="0 */10 * * * *",s.EVERY_30_MINUTES="0 */30 * * * *",s.EVERY_HOUR="0 0-23/1 * * *",s.EVERY_2_HOURS="0 0-23/2 * * *",s.EVERY_3_HOURS="0 0-23/3 * * *",s.EVERY_4_HOURS="0 0-23/4 * * *",s.EVERY_5_HOURS="0 0-23/5 * * *",s.EVERY_6_HOURS="0 0-23/6 * * *",s.EVERY_7_HOURS="0 0-23/7 * * *",s.EVERY_8_HOURS="0 0-23/8 * * *",s.EVERY_9_HOURS="0 0-23/9 * * *",s.EVERY_10_HOURS="0 0-23/10 * * *",s.EVERY_11_HOURS="0 0-23/11 * * *",s.EVERY_12_HOURS="0 0-23/12 * * *",s.EVERY_DAY_AT_1AM="0 01 * * *",s.EVERY_DAY_AT_2AM="0 02 * * *",s.EVERY_DAY_AT_3AM="0 03 * * *",s.EVERY_DAY_AT_4AM="0 04 * * *",s.EVERY_DAY_AT_5AM="0 05 * * *",s.EVERY_DAY_AT_6AM="0 06 * * *",s.EVERY_DAY_AT_7AM="0 07 * * *",s.EVERY_DAY_AT_8AM="0 08 * * *",s.EVERY_DAY_AT_9AM="0 09 * * *",s.EVERY_DAY_AT_10AM="0 10 * * *",s.EVERY_DAY_AT_11AM="0 11 * * *",s.EVERY_DAY_AT_NOON="0 12 * * *",s.EVERY_DAY_AT_1PM="0 13 * * *",s.EVERY_DAY_AT_2PM="0 14 * * *",s.EVERY_DAY_AT_3PM="0 15 * * *",s.EVERY_DAY_AT_4PM="0 16 * * *",s.EVERY_DAY_AT_5PM="0 17 * * *",s.EVERY_DAY_AT_6PM="0 18 * * *",s.EVERY_DAY_AT_7PM="0 19 * * *",s.EVERY_DAY_AT_8PM="0 20 * * *",s.EVERY_DAY_AT_9PM="0 21 * * *",s.EVERY_DAY_AT_10PM="0 22 * * *",s.EVERY_DAY_AT_11PM="0 23 * * *",s.EVERY_DAY_AT_MIDNIGHT="0 0 * * *",s.EVERY_WEEK="0 0 * * 0",s.EVERY_WEEKDAY="0 0 * * 1-5",s.EVERY_WEEKEND="0 0 * * 6,0",s.EVERY_1ST_DAY_OF_MONTH_AT_MIDNIGHT="0 0 1 * *",s.EVERY_1ST_DAY_OF_MONTH_AT_NOON="0 12 1 * *",s.EVERY_2ND_HOUR="0 */2 * * *",s.EVERY_2ND_HOUR_FROM_1AM_THROUGH_11PM="0 1-23/2 * * *",s.EVERY_2ND_MONTH="0 0 1 */2 *",s.EVERY_QUARTER="0 0 1 */3 *",s.EVERY_6_MONTHS="0 0 1 */6 *",s.EVERY_YEAR="0 0 1 0 *",s.EVERY_30_MINUTES_BETWEEN_9AM_AND_5PM="0 */30 9-17 * * *",s.EVERY_30_MINUTES_BETWEEN_9AM_AND_6PM="0 */30 9-18 * * *",s.EVERY_30_MINUTES_BETWEEN_10AM_AND_7PM="0 */30 10-19 * * *",s.MONDAY_TO_FRIDAY_AT_1AM="0 0 01 * * 1-5",s.MONDAY_TO_FRIDAY_AT_2AM="0 0 02 * * 1-5",s.MONDAY_TO_FRIDAY_AT_3AM="0 0 03 * * 1-5",s.MONDAY_TO_FRIDAY_AT_4AM="0 0 04 * * 1-5",s.MONDAY_TO_FRIDAY_AT_5AM="0 0 05 * * 1-5",s.MONDAY_TO_FRIDAY_AT_6AM="0 0 06 * * 1-5",s.MONDAY_TO_FRIDAY_AT_7AM="0 0 07 * * 1-5",s.MONDAY_TO_FRIDAY_AT_8AM="0 0 08 * * 1-5",s.MONDAY_TO_FRIDAY_AT_9AM="0 0 09 * * 1-5",s.MONDAY_TO_FRIDAY_AT_09_30AM="0 30 09 * * 1-5",s.MONDAY_TO_FRIDAY_AT_10AM="0 0 10 * * 1-5",s.MONDAY_TO_FRIDAY_AT_11AM="0 0 11 * * 1-5",s.MONDAY_TO_FRIDAY_AT_11_30AM="0 30 11 * * 1-5",s.MONDAY_TO_FRIDAY_AT_12PM="0 0 12 * * 1-5",s.MONDAY_TO_FRIDAY_AT_1PM="0 0 13 * * 1-5",s.MONDAY_TO_FRIDAY_AT_2PM="0 0 14 * * 1-5",s.MONDAY_TO_FRIDAY_AT_3PM="0 0 15 * * 1-5",s.MONDAY_TO_FRIDAY_AT_4PM="0 0 16 * * 1-5",s.MONDAY_TO_FRIDAY_AT_5PM="0 0 17 * * 1-5",s.MONDAY_TO_FRIDAY_AT_6PM="0 0 18 * * 1-5",s.MONDAY_TO_FRIDAY_AT_7PM="0 0 19 * * 1-5",s.MONDAY_TO_FRIDAY_AT_8PM="0 0 20 * * 1-5",s.MONDAY_TO_FRIDAY_AT_9PM="0 0 21 * * 1-5",s.MONDAY_TO_FRIDAY_AT_10PM="0 0 22 * * 1-5",s.MONDAY_TO_FRIDAY_AT_11PM="0 0 23 * * 1-5",s))(Dt||{});var E=(h=>(h.WORKFLOW_NOT_FOUND_ERROR="WorkflowNotFoundError",h.WORKFLOW_ALREADY_EXISTS_ERROR="WorkflowAlreadyExistsError",h.WORKFLOW_EXECUTION_FAILED_ERROR="WorkflowExecutionFailedError",h.EXECUTION_STATE_OUTPUT_INVALID_ERROR="ExecutionStateOutputInvalidError",h.EXECUTION_STATE_RESULT_INVALID_ERROR="ExecutionStateResultInvalidError",h.EXECUTION_PROVIDER_OUTPUT_INVALID_ERROR="ExecutionProviderOutputInvalidError",h.PROVIDER_NOT_FOUND_ERROR="ProviderNotFoundError",h.PROVIDER_EXECUTION_FAILED_ERROR="ProviderExecutionFailedError",h.STEP_NOT_FOUND_ERROR="StepNotFoundError",h.STEP_ALREADY_EXISTS_ERROR="StepAlreadyExistsError",h.STEP_EXECUTION_FAILED_ERROR="StepExecutionFailedError",h.EXECUTION_STATE_CORRUPT_ERROR="ExecutionStateCorruptError",h.EXECUTION_EVENT_PAYLOAD_INVALID_ERROR="ExecutionEventPayloadInvalidError",h.EXECUTION_EVENT_CONTROL_INVALID_ERROR="ExecutionEventControlInvalidError",h.EXECUTION_STATE_CONTROL_INVALID_ERROR="ExecutionStateControlInvalidError",h.STEP_CONTROL_COMPILATION_FAILED_ERROR="StepControlCompilationFailedError",h.METHOD_NOT_ALLOWED_ERROR="MethodNotAllowedError",h.INVALID_ACTION_ERROR="InvalidActionError",h.MISSING_SECRET_KEY_ERROR="MissingSecretKeyError",h.SIGNATURE_MISMATCH_ERROR="SignatureMismatchError",h.SIGNATURE_NOT_FOUND_ERROR="SignatureNotFoundError",h.SIGNATURE_INVALID_ERROR="SignatureInvalidError",h.SIGNATURE_EXPIRED_ERROR="SignatureExpiredError",h.SIGNING_KEY_NOT_FOUND_ERROR="SigningKeyNotFoundError",h.BRIDGE_ERROR="BridgeError",h.SIGNATURE_VERSION_INVALID_ERROR="SignatureVersionInvalidError",h.WORKFLOW_PAYLOAD_INVALID_ERROR="WorkflowPayloadInvalidError",h))(E||{});var Le=(w=>(w.NOVU_SIGNATURE="novu-signature",w.NOVU_ANONYMOUS="novu-anonymous",w.NOVU_SIGNATURE_DEPRECATED="x-novu-signature",w.NOVU_ANONYMOUS_DEPRECATED="x-novu-anonymous",w.NOVU_FRAMEWORK_SDK="novu-framework-sdk",w.NOVU_FRAMEWORK_SERVER="novu-framework-server",w.NOVU_FRAMEWORK_VERSION="novu-framework-version",w.USER_AGENT="user-agent",w.CONTENT_TYPE="content-type",w.ACCESS_CONTROL_ALLOW_ORIGIN="access-control-allow-origin",w.ACCESS_CONTROL_ALLOW_METHODS="access-control-allow-methods",w.ACCESS_CONTROL_ALLOW_HEADERS="access-control-allow-headers",w.ACCESS_CONTROL_MAX_AGE="access-control-max-age",w))(Le||{});var te=(i=>(i.POST="POST",i.GET="GET",i.OPTIONS="OPTIONS",i))(te||{});var Be=(o=>(o.WORKFLOW_ID="workflowId",o.STEP_ID="stepId",o.ACTION="action",o.SOURCE="source",o))(Be||{});var ie=(r=>(r[r.CONTINUE=100]="CONTINUE",r[r.SWITCHING_PROTOCOLS=101]="SWITCHING_PROTOCOLS",r[r.PROCESSING=102]="PROCESSING",r[r.EARLYHINTS=103]="EARLYHINTS",r[r.OK=200]="OK",r[r.CREATED=201]="CREATED",r[r.ACCEPTED=202]="ACCEPTED",r[r.NON_AUTHORITATIVE_INFORMATION=203]="NON_AUTHORITATIVE_INFORMATION",r[r.NO_CONTENT=204]="NO_CONTENT",r[r.RESET_CONTENT=205]="RESET_CONTENT",r[r.PARTIAL_CONTENT=206]="PARTIAL_CONTENT",r[r.AMBIGUOUS=300]="AMBIGUOUS",r[r.MOVED_PERMANENTLY=301]="MOVED_PERMANENTLY",r[r.FOUND=302]="FOUND",r[r.SEE_OTHER=303]="SEE_OTHER",r[r.NOT_MODIFIED=304]="NOT_MODIFIED",r[r.TEMPORARY_REDIRECT=307]="TEMPORARY_REDIRECT",r[r.PERMANENT_REDIRECT=308]="PERMANENT_REDIRECT",r[r.BAD_REQUEST=400]="BAD_REQUEST",r[r.UNAUTHORIZED=401]="UNAUTHORIZED",r[r.PAYMENT_REQUIRED=402]="PAYMENT_REQUIRED",r[r.FORBIDDEN=403]="FORBIDDEN",r[r.NOT_FOUND=404]="NOT_FOUND",r[r.METHOD_NOT_ALLOWED=405]="METHOD_NOT_ALLOWED",r[r.NOT_ACCEPTABLE=406]="NOT_ACCEPTABLE",r[r.PROXY_AUTHENTICATION_REQUIRED=407]="PROXY_AUTHENTICATION_REQUIRED",r[r.REQUEST_TIMEOUT=408]="REQUEST_TIMEOUT",r[r.CONFLICT=409]="CONFLICT",r[r.GONE=410]="GONE",r[r.LENGTH_REQUIRED=411]="LENGTH_REQUIRED",r[r.PRECONDITION_FAILED=412]="PRECONDITION_FAILED",r[r.PAYLOAD_TOO_LARGE=413]="PAYLOAD_TOO_LARGE",r[r.URI_TOO_LONG=414]="URI_TOO_LONG",r[r.UNSUPPORTED_MEDIA_TYPE=415]="UNSUPPORTED_MEDIA_TYPE",r[r.REQUESTED_RANGE_NOT_SATISFIABLE=416]="REQUESTED_RANGE_NOT_SATISFIABLE",r[r.EXPECTATION_FAILED=417]="EXPECTATION_FAILED",r[r.I_AM_A_TEAPOT=418]="I_AM_A_TEAPOT",r[r.MISDIRECTED=421]="MISDIRECTED",r[r.UNPROCESSABLE_ENTITY=422]="UNPROCESSABLE_ENTITY",r[r.FAILED_DEPENDENCY=424]="FAILED_DEPENDENCY",r[r.PRECONDITION_REQUIRED=428]="PRECONDITION_REQUIRED",r[r.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",r[r.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",r[r.NOT_IMPLEMENTED=501]="NOT_IMPLEMENTED",r[r.BAD_GATEWAY=502]="BAD_GATEWAY",r[r.SERVICE_UNAVAILABLE=503]="SERVICE_UNAVAILABLE",r[r.GATEWAY_TIMEOUT=504]="GATEWAY_TIMEOUT",r[r.HTTP_VERSION_NOT_SUPPORTED=505]="HTTP_VERSION_NOT_SUPPORTED",r))(ie||{}),Ui=[500];var ne=(i=>(i.WORKFLOW="workflow",i.PROVIDER="provider",i.STEP="step",i))(ne||{});var F=(a=>(a.EMAIL="email",a.SMS="sms",a.PUSH="push",a.CHAT="chat",a.IN_APP="in_app",a))(F||{}),ze=(i=>(i.DIGEST="digest",i.DELAY="delay",i.CUSTOM="custom",i))(ze||{});var Ke="2.1.1";var B=Ke,oe="2024-06-26";var He=(a=>(a.EMAIL="email",a.SMS="sms",a.PUSH="push",a.CHAT="chat",a.IN_APP="inApp",a))(He||{});var R=class extends Error{data},re=class extends R{statusCode=404},v=class extends R{statusCode=400},C=class extends R{statusCode=401},L=class extends R{statusCode=500},se=class extends R{statusCode=409};var ae=class extends v{code="ExecutionStateCorruptError";constructor(e,t){super(`Workflow with id: \`${e}\` has a corrupt state. Step with id: \`${t}\` does not exist. Please provide the missing state.`),this.data={workflowId:e,stepId:t};}},z=class extends v{code="ExecutionEventPayloadInvalidError";constructor(e,t){super(`Workflow with id: \`${e}\` has invalid \`payload\`. Please provide the correct event payload.`),this.data=t;}},ce=class extends v{code="ExecutionEventControlInvalidError";constructor(e,t){super(`Workflow with id: \`${e}\` has invalid \`controls\`. Please provide the correct event controls.`),this.data=t;}},le=class extends v{code="ExecutionStateControlInvalidError";constructor(e,t,i){super(`Workflow with id: \`${e}\` has an invalid state. Step with id: \`${t}\` has invalid \`controls\`. Please provide the correct step controls.`),this.data=i;}},pe=class extends v{code="ExecutionStateOutputInvalidError";constructor(e,t,i){super(`Workflow with id: \`${e}\` has an invalid state. Step with id: \`${t}\` has invalid output. Please provide the correct step output.`),this.data=i;}},de=class extends v{code="ExecutionStateResultInvalidError";constructor(e,t,i){super(`Workflow with id: \`${e}\` has an invalid state. Step with id: \`${t}\` has invalid result. Please provide the correct step result.`),this.data=i;}},ue=class extends v{code="StepControlCompilationFailedError";constructor(e,t,i){super(`Workflow with id: \`${e}\` has invalid controls syntax in step with id: \`${t}\`. Please correct step control syntax.`),this.data=i;}},he=class extends v{code="ExecutionProviderOutputInvalidError";constructor(e,t,i,o){super(`Workflow with id: \`${e}\` has an invalid state. Step with id: \`${t}\` and provider with id: \`${i}\` has invalid output. Please provide the correct provider output.`),this.data=o;}},me=class extends v{code="WorkflowPayloadInvalidError";constructor(e,t){super(`Workflow with id: \`${e}\` has invalid \`payload\`. Please provide the correct payload.`),this.data=t;}},ye=class extends R{statusCode;data;code;constructor(e,t,i){super(),this.data={message:i},this.statusCode=e,this.code=t;}};var Xe=async()=>{if(process.env.NOVU_BRIDGE_ORIGIN)return `${process.env.NOVU_BRIDGE_ORIGIN}/api/novu`;if(process.env.NEXT_PUBLIC_VERCEL_ENV==="preview"&&process.env.NEXT_PUBLIC_VERCEL_URL)return `https://${process.env.NEXT_PUBLIC_VERCEL_URL}/api/novu`;try{if(process.env.NODE_ENV==="development"){let e=await(await fetch("http://localhost:2022/.well-known/novu")).json();return `${e.tunnelOrigin}${e.route}`}}catch(n){console.error(n);}return ""};var m={info:n=>j__default.default.blue(n),warning:n=>j__default.default.yellow(n),error:n=>j__default.default.red(n),success:n=>j__default.default.green(n),underline:n=>j__default.default.underline(n),bold:n=>j__default.default.bold(n)},S={SUCCESS:m.success("\u2714"),ERROR:m.error("\u2717"),WARNING:m.warning("\u26A0"),INFO:m.info("\u2139"),ARROW:m.bold("\u2192"),MOCK:m.info("\u25CB"),HYDRATED:m.bold(m.info("\u2192")),STEP:m.info("\u03C3"),ACTION:m.info("\u03B1"),DURATION:m.info("\u0394"),PROVIDER:m.info("\u2699"),OUTPUT:m.info("\u21E2"),INPUT:m.info("\u21E0"),WORKFLOW:m.info("\u03C9"),STATE:m.info("\u03C3"),EXECUTE:m.info("\u03B5"),PREVIEW:m.info("\u03C1")};var je=n=>Object.values(n).map(e=>`\`${e}\``).join(", "),fe=n=>n.replaceAll(/(\w)(\w*)/g,(e,t,i)=>t.toUpperCase()+i.toLowerCase()).replaceAll(/[\s-]+/g,"");var ge=(n,e="https://api.novu.co")=>{let t=process.env.NOVU_API_URL||e;return {post:async(i,o)=>{let a=await fetch(`${t}/v1${i}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`ApiKey ${n}`},body:JSON.stringify(o)}),c=await a.json();if(a.ok)return c;throw shared.checkIsResponseError(c)?new ye(c.statusCode,c.error,c.message):new V("Error processing API request to Novu Cloud from Bridge application.")},delete:async i=>(await fetch(`${t}/v1${i}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`ApiKey ${n}`}})).json()}};var Ft={allowedTags:Ze__default.default.defaults.allowedTags.concat(["style","img","html","head","body","link","meta","title"]),allowedAttributes:!1,allowVulnerableTags:!0,parseStyleAttributes:!1,parser:{lowerCaseAttributeNames:!0}},Je=n=>{if(!n)return n;let e=/^<!DOCTYPE .*?>/,t=n.match(e),i=Ze__default.default(n,Ft);return t?t[0]+i:i},we=n=>Object.keys(n).reduce((e,t)=>{let i=n[t];return typeof i=="string"?e[t]=Je(i):Array.isArray(i)?e[t]=i.map(o=>typeof o=="string"?Je(o):typeof o=="object"?we(o):o):typeof i=="object"&&i!==null?e[t]=we(i):e[t]=i,e},{});var Se=class extends R{code="MethodNotAllowedError";statusCode=405;message=`Method not allowed. Please use one of ${je(te)}`},K=class extends v{code="InvalidActionError";constructor(e,t){super(`Invalid query string: \`action\`=\`${e}\`. Please use one of ${je(t)}`);}},be=class extends v{code="MissingSecretKeyError";constructor(){super("Missing secret key. Set the `NOVU_SECRET_KEY` environment variable or pass `secretKey` to the client options.");}};var V=class extends L{code="BridgeError";message="Something went wrong. Please try again later."};var W=class extends se{constructor(e,t){super(`${fe(e)} with id: \`${t}\` already exists. Please use a different id.`);}},D=class extends re{constructor(e,t){super(`${fe(e)} with id: \`${t}\` does not exist. Please provide a valid id.`);}},Y=class extends L{constructor(e,t){super(`Failed to execute ${fe(e)} with id: \`${t}\`. Please try again later.`);}};var Te=class extends D{code="ProviderNotFoundError";constructor(e){super("provider",e);}},ve=class extends Y{code="ProviderExecutionFailedError";constructor(e){super("workflow",e);}};var Oe=class extends C{code="SignatureMismatchError";constructor(){super("Signature does not match the expected signature. Please ensure the signature provided in the `novu-signature` header is correct and try again.");}},Ae=class extends C{code="SignatureNotFoundError";constructor(){super("Signature not found. Please provide a signature in the `novu-signature` header");}},Ee=class extends C{code="SignatureInvalidError";constructor(){super("Signature is invalid. Please provide a valid signature in the `novu-signature` header");}},Re=class extends C{code="SignatureExpiredError";constructor(){super(`Signature expired. Please provide a signature with a timestamp no older than ${5} minutes in the \`novu-signature\` header`);}},_e=class extends C{code="SigningKeyNotFoundError";constructor(){super("Signature key not found. Please provide a valid key in the Client constructor `config.secretKey`");}};var xe=class extends D{code="StepNotFoundError";constructor(e){super("step",e);}},Ie=class extends W{code="StepAlreadyExistsError";constructor(e){super("step",e);}};var H=class extends D{code="WorkflowNotFoundError";constructor(e){super("workflow",e);}},Pe=class extends W{code="WorkflowAlreadyExistsError";constructor(e){super("workflow",e);}};var Qe=n=>typeof structuredClone=="function"?structuredClone(n):JSON.parse(JSON.stringify(n));var ke=class{ajv;compiledSchemas;constructor(){this.ajv=new Lt__default.default({useDefaults:!0,removeAdditional:"failing"}),jt__default.default(this.ajv),this.compiledSchemas=new Map;}canHandle(e){return typeof e=="boolean"?!1:e.type==="object"||!!e.anyOf||!!e.allOf||!!e.oneOf}async validate(e,t){let i=this.compiledSchemas.get(t);i||(i=this.ajv.compile(t),this.compiledSchemas.set(t,i));let o=Qe(e);return i(o)?{success:!0,data:o}:{success:!1,errors:i.errors.map(c=>({path:c.instancePath,message:c.message}))}}transformToJsonSchema(e){return e}};var Ne=class{canHandle(e){return e.safeParseAsync!==void 0}async validate(e,t){let i=t.safeParse(e);return i.success?{success:!0,data:i.data}:{success:!1,errors:i.error.errors.map(o=>({path:`/${o.path.join("/")}`,message:o.message}))}}transformToJsonSchema(e){try{return zodToJsonSchema.zodToJsonSchema(e)}catch(t){throw t?.message?.includes("Cannot find module")&&console.error("Tried to use a zod schema in @novu/framework without `zod-to-json-schema` installed. Please install it by running `npm install zod-to-json-schema`."),t}}};var Ce=new Ne,De=new ke,Me=async(n,e)=>{if(Ce.canHandle(n))return Ce.validate(e,n);if(De.canHandle(n))return De.validate(e,n);throw new Error("Invalid schema")},y=n=>{if(Ce.canHandle(n))return Ce.transformToJsonSchema(n);if(De.canHandle(n))return De.transformToJsonSchema(n);throw new Error("Invalid schema")};jsonSchemaFaker.JSONSchemaFaker.random.shuffle=function(){return ["[placeholder]"]};jsonSchemaFaker.JSONSchemaFaker.option({useDefaultValue:!0,alwaysFakeOptionals:!0});function Yt(){return ["development",void 0].includes(process.env.NODE_ENV)}var X=class{discoveredWorkflows=[];templateEngine=new liquidjs.Liquid;secretKey;version=B;strictAuthentication;constructor(e){let t=this.buildOptions(e);this.secretKey=t.secretKey,this.strictAuthentication=t.strictAuthentication;}buildOptions(e){let t={secretKey:void 0,strictAuthentication:!Yt()};return t.secretKey=e?.secretKey||process.env.NOVU_SECRET_KEY||process.env.NOVU_API_KEY,e?.strictAuthentication!==void 0?t.strictAuthentication=e.strictAuthentication:process.env.NOVU_STRICT_AUTHENTICATION_ENABLED!==void 0&&(t.strictAuthentication=process.env.NOVU_STRICT_AUTHENTICATION_ENABLED==="true"),t}addWorkflows(e){for(let t of e){if(this.discoveredWorkflows.some(i=>i.workflowId===t.definition.workflowId))throw new Pe(t.definition.workflowId);this.discoveredWorkflows.push(t.definition);}}healthCheck(){let e=this.discoveredWorkflows.length,t=this.discoveredWorkflows.reduce((i,o)=>i+o.steps.length,0);return {status:"ok",sdkVersion:B,frameworkVersion:oe,discovered:{workflows:e,steps:t}}}getWorkflow(e){let t=this.discoveredWorkflows.find(i=>i.workflowId===e);if(t)return t;throw new H(e)}getStep(e,t){let o=this.getWorkflow(e).steps.find(a=>a.stepId===t);if(o)return o;throw new xe(t)}getRegisteredWorkflows(){return this.discoveredWorkflows}discover(){return {workflows:this.getRegisteredWorkflows()}}mock(e){return jsonSchemaFaker.JSONSchemaFaker.generate(y(e))}async validate(e,t,i,o,a,c,p){let d=await Me(t,e);if(d.success)return d.data;switch(i){case"event":this.throwInvalidEvent(o,a,d.errors);case"step":this.throwInvalidStep(c,o,a,d.errors);case"provider":this.throwInvalidProvider(c,p,o,a,d.errors);default:throw new Error(`Invalid component: '${i}'`)}}throwInvalidProvider(e,t,i,o,a){if(!e)throw new Error("stepId is required");if(!t)throw new Error("providerId is required");switch(i){case"output":throw new he(o,e,t,a);default:throw new Error(`Invalid payload type: '${i}'`)}}throwInvalidStep(e,t,i,o){if(!e)throw new Error("stepId is required");switch(t){case"output":throw new pe(i,e,o);case"result":throw new de(i,e,o);case"controls":throw new le(i,e,o);default:throw new Error(`Invalid payload type: '${t}'`)}}throwInvalidEvent(e,t,i){switch(e){case"controls":throw new ce(t,i);case"payload":throw new z(t,i);default:throw new Error(`Invalid payload type: '${e}'`)}}executeStepFactory(e,t){return async(i,o,a)=>{let c=this.getStep(e.workflowId,i),p=await this.createStepControls(c,e),d=e.action==="preview";if(!d&&await this.shouldSkip(a?.skip,p))return i===e.stepId&&t({options:{skip:!0},outputs:{},providers:{}}),{};let f=this.previewStep.bind(this),T=this.executeStep.bind(this),A=await(d?f:T)(e,{...c,providers:c.providers.map(w=>{let P=a?.providers?.[w.type];if(!P)throw new Te(w.type);return {...w,resolve:P}}),resolve:o});return Object.values(F).includes(c.type)&&(A={...A,outputs:we(A.outputs)}),i===e.stepId&&t({...A,options:{skip:!1}}),A.outputs}}async shouldSkip(e,t){return e?e(t):!1}async executeWorkflow(e){let o=`${e.action==="execute"?"Executed":e.action==="preview"?"Previewed":"Invalid action"} workflowId:`;console.log(`
${m.bold(m.underline(o))} '${e.workflowId}'`);let a=this.getWorkflow(e.workflowId),c=process.hrtime(),p={outputs:{},providers:{},options:{skip:!1}},d,f=new Promise(k=>{d=k;}),T=k=>{d(),p=k;},I;try{if(e.action==="execute"&&!e.payload&&!e.data)throw new z(e.workflowId,{message:"Event `payload` is required"});let k=await this.createExecutionPayload(e,a),N={...e,payload:k};await Promise.race([f,a.execute({payload:k,environment:{},input:{},controls:{},subscriber:e.subscriber,step:{email:this.executeStepFactory(N,T),sms:this.executeStepFactory(N,T),inApp:this.executeStepFactory(N,T),digest:this.executeStepFactory(N,T),delay:this.executeStepFactory(N,T),push:this.executeStepFactory(N,T),chat:this.executeStepFactory(N,T),custom:this.executeStepFactory(N,T)}})]);}catch(k){I=k;}let A=process.hrtime(c),w=A[0],P=A[1],Ge=w*1e3+P/1e6,kt=I?S.ERROR:S.SUCCESS,Nt=e.action==="execute"?"Executed":e.action==="preview"?"Previewed":"Invalid action";if(console.log(`${kt} ${Nt} workflowId: \`${e.workflowId}\``),this.prettyPrintExecute(e,Ge,I),I)throw I;return {outputs:p.outputs,providers:p.providers,options:p.options,metadata:{status:"success",error:!1,duration:Ge}}}async createExecutionPayload(e,t){let i=e.payload||e.data;if(e.action==="preview"){let a=this.mock(t.payload.schema);i=Object.assign(a,i);}return await this.validate(i,t.payload.unknownSchema,"event","payload",e.workflowId)}prettyPrintExecute(e,t,i){let o=i?S.ERROR:S.SUCCESS,a=e.action==="execute"?"Executed":e.action==="preview"?"Previewed":"Invalid action",c=i?"Failed to execute":a,p=i?m.error:m.success,d=`${o} ${c} workflowId: '${e.workflowId}`;console.log(`
  ${m.bold(p(d))}'`),console.log(`  \u251C ${S.STEP} stepId: '${e.stepId}'`),console.log(`  \u251C ${S.ACTION} action: '${e.action}'`),console.log(`  \u2514 ${S.DURATION} duration: '${t.toFixed(2)}ms'
`);}async executeProviders(e,t,i){return t.providers.reduce(async(o,a)=>{let c=await o,p=this.previewProvider.bind(this),d=this.executeProvider.bind(this),T=await(e.action==="preview"?p:d)(e,t,a,i);return {...c,[a.type]:T}},Promise.resolve({}))}previewProvider(e,t,i,o){return console.log(`  ${S.MOCK} Mocked provider: \`${i.type}\``),this.mock(i.outputs.schema)}async executeProvider(e,t,i,o){let a=Ue__default.default({indent:2}).start(`Executing provider: \`${i.type}\``);try{if(e.stepId===t.stepId){let c=await this.createStepControls(t,e),p=await i.resolve({controls:c,outputs:o}),d=await this.validate(p,i.outputs.unknownSchema,"step","output",e.workflowId,t.stepId,i.type);return a.succeed(`Executed provider: \`${i.type}\``),{...d,_passthrough:p._passthrough}}else return a.stopAndPersist({symbol:S.HYDRATED,text:`Hydrated provider: \`${i.type}\``}),{}}catch(c){throw a.stopAndPersist({symbol:S.ERROR,text:`Failed to execute provider: \`${i.type}\``}),new ve(`Failed to execute provider: '${i.type}'.
${c.message}`)}}async executeStep(e,t){if(e.stepId===t.stepId){let i=Ue__default.default({indent:1}).start(`Executing stepId: \`${t.stepId}\``);try{let o=await this.createStepControls(t,e),a=await this.compileControls(o,e),c=await t.resolve(a),p=await this.validate(c,t.outputs.unknownSchema,"step","output",e.workflowId,t.stepId),d=await this.executeProviders(e,t,p);return i.succeed(`Executed stepId: \`${t.stepId}\``),{outputs:p,providers:d}}catch(o){throw i.stopAndPersist({prefixText:"",symbol:S.ERROR,text:`Failed to execute stepId: \`${t.stepId}\``}),o}}else {let i=Ue__default.default({indent:1}).start(`Hydrating stepId: \`${t.stepId}\``);try{let o=e.state.find(a=>a.stepId===t.stepId);if(o){let a=await this.validate(o.outputs,t.results.unknownSchema,"step","result",e.workflowId,t.stepId);return i.stopAndPersist({symbol:S.HYDRATED,text:`Hydrated stepId: \`${t.stepId}\``}),{outputs:a,providers:await this.executeProviders(e,t,a)}}else throw new ae(e.workflowId,t.stepId)}catch(o){throw i.stopAndPersist({symbol:S.ERROR,text:`Failed to hydrate stepId: \`${t.stepId}\``}),o}}}async compileControls(e,t){try{let i=this.templateEngine.parse(JSON.stringify(e)),o=await this.templateEngine.render(i,{payload:t.payload||t.data,subscriber:t.subscriber,...t.payload||t.data});return JSON.parse(o)}catch(i){throw new ue(t.workflowId,t.stepId,i)}}async createStepControls(e,t){let i=t.controls||t.inputs;return await this.validate(i,e.controls.unknownSchema,"step","controls",t.workflowId,e.stepId)}async previewStep(e,t){let i=Ue__default.default({indent:1}).start(`Previewing stepId: \`${t.stepId}\``);try{if(e.stepId===t.stepId){let o=await this.createStepControls(t,e),a=await this.compileControls(o,e),c=await t.resolve(a),p=await this.validate(c,t.outputs.unknownSchema,"step","output",e.workflowId,t.stepId);return i.stopAndPersist({symbol:S.MOCK,text:`Mocked stepId: \`${t.stepId}\``}),{outputs:p,providers:await this.executeProviders(e,t,p)}}else {let o=this.mock(t.results.schema);return i.stopAndPersist({symbol:S.MOCK,text:`Mocked stepId: \`${t.stepId}\``}),{outputs:o,providers:await this.executeProviders(e,t,o)}}}catch(o){throw i.stopAndPersist({symbol:S.ERROR,text:`Failed to preview stepId: \`${t.stepId}\``}),o}}getStepCode(e,t){return {code:this.getStep(e,t).resolve.toString()}}getWorkflowCode(e){return {code:this.getWorkflow(e).execute.toString()}}getCode(e,t){let i;if(e)t?i=this.getStepCode(e,t):i=this.getWorkflowCode(e);else throw new H(e);return i}};var We=class{frameworkName;handler;client;hmacEnabled;http;constructor(e){this.handler=e.handler,this.client=e.client?e.client:new X,this.client.addWorkflows(e.workflows),this.http=ge(this.client.secretKey),this.frameworkName=e.frameworkName,this.hmacEnabled=this.client.strictAuthentication;}createHandler(){return async(...e)=>{let t=await this.handler(...e),i=await this.handleAction({actions:t});return t.transformResponse(i)}}getStaticHeaders(){let e=`novu-framework:v${this.client.version}`;return {"content-type":"application/json","access-control-allow-origin":"*","access-control-allow-methods":"GET, POST","access-control-allow-headers":"*","access-control-max-age":"604800","novu-framework-version":oe,"novu-framework-sdk":B,"novu-framework-server":this.frameworkName,"user-agent":e}}createResponse(e,t){return {status:e,body:JSON.stringify(t),headers:{...this.getStaticHeaders()}}}createError(e){return {status:e.statusCode,body:JSON.stringify({message:e.message,data:e.data,code:e.code}),headers:this.getStaticHeaders()}}async handleAction({actions:e}){let t=await e.url(),i=await e.method(),o=t.searchParams.get("action")||"",a=t.searchParams.get("workflowId")||"",c=t.searchParams.get("stepId")||"",p=await e.headers("novu-signature")||await e.headers("x-novu-signature")||"",d={};try{i==="POST"&&(d=await e.body());}catch{}try{o!=="health-check"&&this.validateHmac(d,p);let f=this.getPostActionMap(d,a,c,o),T=this.getGetActionMap(a,c);if(i==="POST")return await this.handlePostAction(o,f);if(i==="GET")return await this.handleGetAction(o,T);if(i==="OPTIONS")return this.createResponse(200,{})}catch(f){return this.handleError(f)}return this.createError(new Se(i))}getPostActionMap(e,t,i,o){return {trigger:this.triggerAction({workflowId:t,...e}),execute:async()=>{let a=await this.client.executeWorkflow({...e,workflowId:t,stepId:i,action:o});return this.createResponse(200,a)},preview:async()=>{let a=await this.client.executeWorkflow({...e,workflowId:t,stepId:i,action:o});return this.createResponse(200,a)}}}triggerAction(e){return async()=>{let t={name:e.workflowId,to:e.to,payload:e?.payload||{},transactionId:e.transactionId,overrides:e.overrides||{},...e.actor&&{actor:e.actor},...e.bridgeUrl&&{bridgeUrl:e.bridgeUrl},...e.controls&&{controls:e.controls}},i=await this.http.post("/events/trigger",t);return this.createResponse(200,i)}}getGetActionMap(e,t){return {discover:async()=>{let i=await this.client.discover();return this.createResponse(200,i)},"health-check":async()=>{let i=await this.client.healthCheck();return this.createResponse(200,i)},code:async()=>{let i=await this.client.getCode(e,t);return this.createResponse(200,i)}}}async handlePostAction(e,t){if(Object.values(q).includes(e)){let i=t[e];return i()}else throw new K(e,q)}async handleGetAction(e,t){if(Object.values(ee).includes(e)){let i=t[e];return i()}else throw new K(e,ee)}isBridgeError(e){return Object.values(E).includes(e?.code)}isPlatformError(e){return e?.statusCode>=400&&e?.statusCode<500}handleError(e){return this.isBridgeError(e)?(e.statusCode===500&&console.error(e),this.createError(e)):this.isPlatformError(e)?this.createError(e):(console.error(e),this.createError(new V))}validateHmac(e,t){if(!this.hmacEnabled)return;if(!t)throw new Ae;if(!this.client.secretKey)throw new _e;let[i,o]=t.split(",");if(!i||!o)throw new Ee;let[a,c]=i.split("="),[p,d]=o.split("=");if(Number(a)<Date.now()-1500)throw new Re;if(!(this.hashHmac(this.client.secretKey,`${c}.${JSON.stringify(e)}`)===d))throw new Oe}hashHmac(e,t){return crypto.createHmac("sha256",e).update(t).digest("hex")}};var l={output:{type:"object",properties:{},required:[],additionalProperties:!0}};var $t={type:"object",properties:{webhookUrl:{type:"string",format:"uri"},text:{type:"string"},blocks:{type:"array",items:{type:"object",properties:{type:{enum:["image","context","actions","divider","section","input","file","header","video","rich_text"]}},required:["type"],additionalProperties:!0}}},additionalProperties:!0},et={output:$t};var tt={[shared.ChatProviderIdEnum.Discord]:l,[shared.ChatProviderIdEnum.GetStream]:l,[shared.ChatProviderIdEnum.GrafanaOnCall]:l,[shared.ChatProviderIdEnum.Mattermost]:l,[shared.ChatProviderIdEnum.MsTeams]:l,[shared.ChatProviderIdEnum.RocketChat]:l,[shared.ChatProviderIdEnum.Ryver]:l,[shared.ChatProviderIdEnum.Slack]:et,[shared.ChatProviderIdEnum.WhatsAppBusiness]:l,[shared.ChatProviderIdEnum.Zulip]:l};var qt={type:"object",properties:{to:{anyOf:[{type:"string"},{type:"array",items:{type:"string"}}],description:'Email address of the recipient(s). Example: "Bob bob@host.com". You can use commas to separate multiple recipients (e.g.: "test@example.com,test@example.com" or ["test@example.com", "test@example.com"]).'},from:{type:"string"},subject:{type:"string",description:"Subject of the message."},text:{type:"string",description:"Text version of the message."},html:{type:"string",description:"HTML version of the message."},message:{type:"string",description:"MIME string of the message. Make sure to use multipart/form-data to send this as a file upload."},cc:{anyOf:[{type:"string"},{type:"array",items:{type:"string"}}],description:"Same as To but for carbon copy"},bcc:{anyOf:[{type:"string"},{type:"array",items:{type:"string"}}],description:"Same as To but for blind carbon copy"},ampHtml:{type:"string"},tVersion:{type:"string"},tText:{anyOf:[{type:"string",enum:["yes","no"]},{type:"boolean"}]},oTag:{anyOf:[{type:"string"},{type:"array",items:{type:"string"}}],description:"Tag string. See Tagging for more information."},oDkim:{anyOf:[{type:"string",enum:["yes","no"]},{type:"boolean"}],description:"Enables/disabled DKIM signatures on per-message basis. Pass yes or no"},oDeliverytime:{type:"string",description:"Desired time of delivery. See Date Format. Note: Messages can be scheduled for a maximum of 3 days in the future."},oDeliverytimeOptimizePeriod:{type:"string"},oTimeZoneLocalize:{type:"string"},oTestmode:{anyOf:[{type:"string",enum:["yes","no"]},{type:"boolean"}],description:"Enables sending in test mode. Pass yes if needed. See Sending in Test Mode"},oTracking:{anyOf:[{type:"string",enum:["yes","no"]},{type:"boolean"}],description:"Toggles tracking on a per-message basis, see Tracking Messages for details. Pass yes or no."},oTrackingClicks:{anyOf:[{type:"string",enum:["yes","no","htmlonly"]},{type:"boolean"}],description:"Toggles clicks tracking on a per-message basis. Has higher priority than domain-level setting. Pass yes, no or htmlonly."},oTrackingOpens:{anyOf:[{type:"string",enum:["yes","no"]},{type:"boolean"}],description:"Toggles opens tracking on a per-message basis. Has higher priority than domain-level setting. Pass yes or no."},oRequireTls:{anyOf:[{type:"string",enum:["yes","no"]},{type:"boolean"}]},oSkipVerification:{anyOf:[{type:"string",enum:["yes","no"]},{type:"boolean"}]},recipientVariables:{type:"string"}},required:[],additionalProperties:!0},it={output:qt};var M={type:"object",properties:{name:{type:"string"},email:{type:"string"}},description:'JSON object, containing 2 properties: Name and Email address of a previously validated and active sender. Including the Name property in the JSON is optional. This property is not mandatory in case you use TemplateID and you specified a From address for the template. Format : { "Email":"value", "Name":"value" }.',required:["Email"],additionalProperties:!0},Bt={type:"object",properties:{contentType:{type:"string"},filename:{type:"string"},base64Content:{type:"string"}},required:["ContentType","Filename","Base64Content"],additionalProperties:!0},zt={type:"object",properties:{filename:{type:"string"},contentType:{type:"string"},contentId:{type:"string"},base64Content:{type:"string"}},required:["ContentType","Filename","Base64Content"],additionalProperties:!0},Kt={type:"object",properties:{from:M,sender:M,to:{type:"array",items:M},cc:{type:"array",items:M},bcc:{type:"array",items:M},replyTo:M,subject:{type:"string"},textPart:{type:"string",description:"Content of the message, sent in Text and/or HTML format. At least one of these content types needs to be specified. When the HTML part is the only part provided, Mailjet will not generate a Text-part from the HTML version. The property can't be set when you use TemplateID"},htmlPart:{type:"string",description:"Content of the message, sent in Text and/or HTML format. At least one of these content types needs to be specified. When the HTML part is the only part provided, Mailjet will not generate a Text-part from the HTML version. The property can't be set when you use TemplateID"},templateId:{type:"number",description:"an ID for a template that is previously created and stored in Mailjet's system. It is mandatory when From and TextPart and/or HtmlPart are not provided. "},templateLanguage:{type:"boolean"},templateErrorReporting:M,templateErrorDeliver:{type:"boolean"},attachments:{type:"array",items:Bt},inlineAttachments:{type:"array",items:zt},priority:{type:"number"},customCampaign:{type:"string"},deduplicateCampaign:{type:"boolean"},trackOpens:{type:"string",enum:["account_default","disabled","enabled"]},trackClicks:{type:"string",enum:["account_default","disabled","enabled"]},customId:{type:"string"},eventPayload:{type:"string"},urlTags:{type:"string"},headers:{type:"object",additionalProperties:!0},variables:{type:"object",additionalProperties:!0}},required:[],additionalProperties:!0},nt={output:Kt};var _={type:"object",properties:{address:{type:"string"},name:{type:"string"}},additionalProperties:!0},Fe={type:"object",properties:{content:{type:"string"},path:{type:"string"}},additionalProperties:!0},Ht={type:"object",properties:{from:{anyOf:[{type:"string"},_]},sender:{anyOf:[{type:"string"},_]},to:{anyOf:[{type:"string"},_,{type:"array",items:_}]},cc:{anyOf:[{type:"string"},_,{type:"array",items:_}]},bcc:{anyOf:[{type:"string"},_,{type:"array",items:_}]},replyTo:{anyOf:[{type:"string"},_,{type:"array",items:_}]},inReplyTo:{anyOf:[{type:"string"},_]},references:{anyOf:[{type:"string"},{type:"array",items:{type:"string"}}]},subject:{type:"string"},text:{anyOf:[{type:"string"},Fe]},html:{anyOf:[{type:"string"},Fe]},watchHtml:{anyOf:[{type:"string"},Fe]},amp:{anyOf:[{type:"string"},{type:"object",properties:{content:{type:"string"},path:{type:"string"},href:{type:"string"},encoding:{type:"string"},contentType:{type:"string"},raw:{anyOf:[{type:"string"},Fe]}}}]},icalEvent:{anyOf:[{type:"string"},{type:"object",properties:{content:{type:"string"},path:{type:"string"},method:{type:"string"},filename:{anyOf:[{type:"string"},{type:"boolean"}]},href:{type:"string"},encoding:{type:"string"}}}]},headers:{anyOf:[{type:"object",additionalProperties:!0},{type:"array",items:{type:"object",additionalProperties:!0}}]},list:{anyOf:[{type:"string"},{type:"array",items:{type:"string"}}]},attachments:{type:"array",items:{type:"object",properties:{content:{type:"string"},path:{type:"string"}},additionalProperties:!0}}},required:[],additionalProperties:!0},ot={output:Ht};var Xt={type:"object",properties:{},required:[],additionalProperties:!1},rt={output:Xt};var Jt={type:"object",properties:{personalizations:{type:"array",description:"An array of messages and their metadata. Each object within personalizations can be thought of as an envelope - it defines who should receive an individual message and how that message should be handled. See our [Personalizations documentation](https://sendgrid.com/docs/for-developers/sending-email/personalizations/) for examples.",uniqueItems:!1,maxItems:1e3,items:{type:"object",properties:{from:{title:"From Email Object",type:"object",properties:{email:{type:"string",format:"email",description:"The 'From' email address used to deliver the message. This address should be a verified sender in your Twilio SendGrid account."},name:{type:"string",description:"A name or title associated with the sending email address."}},required:["email"]},to:{title:"To Email Array",type:"array",items:{type:"object",properties:{email:{type:"string",format:"email",description:"The intended recipient's email address."},name:{type:"string",description:"The intended recipient's name."}},required:["email"]}},cc:{type:"array",description:"An array of recipients who will receive a copy of your email. Each object in this array must contain the recipient's email address. Each object in the array may optionally contain the recipient's name.",maxItems:1e3,items:{title:"CC BCC Email Object",type:"object",properties:{email:{type:"string",format:"email",description:"The intended recipient's email address."},name:{type:"string",description:"The intended recipient's name."}},required:["email"]}},bcc:{type:"array",description:"An array of recipients who will receive a blind carbon copy of your email. Each object in this array must contain the recipient's email address. Each object in the array may optionally contain the recipient's name.",maxItems:1e3,items:{title:"CC BCC Email Object",type:"object",properties:{email:{type:"string",format:"email",description:"The intended recipient's email address."},name:{type:"string",description:"The intended recipient's name."}},required:["email"]}},subject:{type:"string",description:"The subject of your email. See character length requirements according to [RFC 2822](http://stackoverflow.com/questions/1592291/what-is-the-email-subject-length-limit#answer-1592310).",minLength:1},headers:{type:"object",description:"A collection of JSON key/value pairs allowing you to specify handling instructions for your email. You may not overwrite the following headers: `x-sg-id`, `x-sg-eid`, `received`, `dkim-signature`, `Content-Type`, `Content-Transfer-Encoding`, `To`, `From`, `Subject`, `Reply-To`, `CC`, `BCC`"},substitutions:{type:"object",description:'Substitutions allow you to insert data without using Dynamic Transactional Templates. This field should **not** be used in combination with a Dynamic Transactional Template, which can be identified by a `templateId` starting with `d-`. This field is a collection of key/value pairs following the pattern "substitutionTag":"value to substitute". The key/value pairs must be strings. These substitutions will apply to the text and html content of the body of your email, in addition to the `subject` and `reply-to` parameters. The total collective size of your substitutions may not exceed 10,000 bytes per personalization object.',maxProperties:1e4},dynamicTemplateData:{type:"object",description:'Dynamic template data is available using Handlebars syntax in Dynamic Transactional Templates. This field should be used in combination with a Dynamic Transactional Template, which can be identified by a `templateId` starting with `d-`. This field is a collection of key/value pairs following the pattern "variable_name":"value to insert".'},customArgs:{type:"object",description:"Values that are specific to this personalization that will be carried along with the email and its activity data. Substitutions will not be made on custom arguments, so any string that is entered into this parameter will be assumed to be the custom argument that you would like to be used. This field may not exceed 10,000 bytes.",maxProperties:1e4},sendAt:{type:"integer",description:"A unix timestamp allowing you to specify when your email should be delivered. Scheduling delivery more than 72 hours in advance is forbidden."}},required:["to"]}},from:{title:"From Email Object",type:"object",properties:{email:{type:"string",format:"email",description:"The 'From' email address used to deliver the message. This address should be a verified sender in your Twilio SendGrid account."},name:{type:"string",description:"A name or title associated with the sending email address."}},required:["email"]},replyTo:{title:"Reply_to Email Object",type:"object",properties:{email:{type:"string",format:"email",description:"The email address where any replies or bounces will be returned."},name:{type:"string",description:"A name or title associated with the `replyTo` email address."}},required:["email"]},replyToList:{type:"array",description:"An array of recipients who will receive replies and/or bounces. Each object in this array must contain the recipient's email address. Each object in the array may optionally contain the recipient's name. You can either choose to use \u201CreplyTo\u201D field or \u201CreplyToList\u201D but not both.",uniqueItems:!0,maxItems:1e3,items:{type:"object",properties:{email:{type:"string",description:"The email address where any replies or bounces will be returned.",format:"email"},name:{type:"string",description:"A name or title associated with the `replyToList` email address."}},required:["email"]}},subject:{type:"string",description:"The global or 'message level' subject of your email. This may be overridden by subject lines set in personalizations.",minLength:1},content:{type:"array",description:"An array where you can specify the content of your email. You can include multiple [MIME types](https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types) of content, but you must specify at least one MIME type. To include more than one MIME type, add another object to the array containing the `type` and `value` parameters.",items:{type:"object",properties:{type:{type:"string",description:"The MIME type of the content you are including in your email (e.g., `\u201Ctext/plain\u201D` or `\u201Ctext/html\u201D`).",minLength:1},value:{type:"string",description:"The actual content of the specified MIME type that you are including in your email.",minLength:1}},required:["type","value"]}},attachments:{type:"array",description:"An array of objects where you can specify any attachments you want to include.",items:{type:"object",properties:{content:{type:"string",description:"The Base64 encoded content of the attachment.",minLength:1},type:{type:"string",description:"The MIME type of the content you are attaching (e.g., `\u201Ctext/plain\u201D` or `\u201Ctext/html\u201D`).",minLength:1},filename:{type:"string",description:"The attachment's filename."},disposition:{type:"string",default:"attachment",description:"The attachment's content-disposition, specifying how you would like the attachment to be displayed. For example, `\u201Cinline\u201D` results in the attached file are displayed automatically within the message while `\u201Cattachment\u201D` results in the attached file require some action to be taken before it is displayed, such as opening or downloading the file.",enum:["inline","attachment"]},contentId:{type:"string",description:"The attachment's content ID. This is used when the disposition is set to `\u201Cinline\u201D` and the attachment is an image, allowing the file to be displayed within the body of your email."}},required:["content","filename"]}},templateId:{type:"string",description:"An email template ID. A template that contains a subject and content \u2014 either text or html \u2014 will override any subject and content values specified at the personalizations or message level."},headers:{description:"An object containing key/value pairs of header names and the value to substitute for them. The key/value pairs must be strings. You must ensure these are properly encoded if they contain unicode characters. These headers cannot be one of the reserved headers.",type:"object"},categories:{type:"array",description:"An array of category names for this message. Each category name may not exceed 255 characters. ",uniqueItems:!0,maxItems:10,items:{type:"string",maxLength:255}},customArgs:{description:"Values that are specific to the entire send that will be carried along with the email and its activity data.  Key/value pairs must be strings. Substitutions will not be made on custom arguments, so any string that is entered into this parameter will be assumed to be the custom argument that you would like to be used. This parameter is overridden by `customArgs` set at the personalizations level. Total `customArgs` size may not exceed 10,000 bytes.",type:"string"},sendAt:{type:"integer",description:"A unix timestamp allowing you to specify when you want your email to be delivered. This may be overridden by the `sendAt` parameter set at the personalizations level. Delivery cannot be scheduled more than 72 hours in advance. If you have the flexibility, it's better to schedule mail for off-peak times. Most emails are scheduled and sent at the top of the hour or half hour. Scheduling email to avoid peak times \u2014 for example, scheduling at 10:53 \u2014 can result in lower deferral rates due to the reduced traffic during off-peak times."},batchId:{type:"string",description:"An ID representing a batch of emails to be sent at the same time. Including a `batchId` in your request allows you include this email in that batch. It also enables you to cancel or pause the delivery of that batch. For more information, see the [Cancel Scheduled Sends API](https://sendgrid.com/docs/api-reference/)."},asm:{type:"object",description:"An object allowing you to specify how to handle unsubscribes.",properties:{groupId:{type:"integer",description:"The unsubscribe group to associate with this email."},groupsToDisplay:{type:"array",description:"An array containing the unsubscribe groups that you would like to be displayed on the unsubscribe preferences page.",maxItems:25,items:{type:"integer"}}},required:["groupId"]},ipPoolName:{type:"string",description:"The IP Pool that you would like to send this email from.",minLength:2,maxLength:64},mailSettings:{type:"object",description:"A collection of different mail settings that you can use to specify how you would like this email to be handled.",properties:{bypassListManagement:{type:"object",description:"Allows you to bypass all unsubscribe groups and suppressions to ensure that the email is delivered to every single recipient. This should only be used in emergencies when it is absolutely necessary that every recipient receives your email. This filter cannot be combined with any other bypass filters. See our [documentation](https://sendgrid.com/docs/ui/sending-email/index-suppressions/#bypass-suppressions) for more about bypass filters.",properties:{enable:{type:"boolean",description:"Indicates if this setting is enabled."}}},bypassSpamManagement:{type:"object",description:"Allows you to bypass the spam report list to ensure that the email is delivered to recipients. Bounce and unsubscribe lists will still be checked; addresses on these other lists will not receive the message. This filter cannot be combined with the `bypassListManagement` filter. See our [documentation](https://sendgrid.com/docs/ui/sending-email/index-suppressions/#bypass-suppressions) for more about bypass filters.",properties:{enable:{type:"boolean",description:"Indicates if this setting is enabled."}}},bypassBounceManagement:{type:"object",description:"Allows you to bypass the bounce list to ensure that the email is delivered to recipients. Spam report and unsubscribe lists will still be checked; addresses on these other lists will not receive the message. This filter cannot be combined with the `bypassListManagement` filter. See our [documentation](https://sendgrid.com/docs/ui/sending-email/index-suppressions/#bypass-suppressions) for more about bypass filters.",properties:{enable:{type:"boolean",description:"Indicates if this setting is enabled."}}},bypassUnsubscribeManagement:{type:"object",description:"Allows you to bypass the global unsubscribe list to ensure that the email is delivered to recipients. Bounce and spam report lists will still be checked; addresses on these other lists will not receive the message. This filter applies only to global unsubscribes and will not bypass group unsubscribes. This filter cannot be combined with the `bypassListManagement` filter. See our [documentation](https://sendgrid.com/docs/ui/sending-email/index-suppressions/#bypass-suppressions) for more about bypass filters.",properties:{enable:{type:"boolean",description:"Indicates if this setting is enabled."}}},footer:{type:"object",description:"The default footer that you would like included on every email.",properties:{enable:{type:"boolean",description:"Indicates if this setting is enabled."},text:{type:"string",description:"The plain text content of your footer."},html:{type:"string",description:"The HTML content of your footer."}}},sandboxMode:{type:"object",description:"Sandbox Mode allows you to send a test email to ensure that your request body is valid and formatted correctly.",properties:{enable:{type:"boolean",description:"Indicates if this setting is enabled."}}}}},trackingSettings:{type:"object",description:"Settings to determine how you would like to track the metrics of how your recipients interact with your email.",properties:{clickTracking:{type:"object",description:"Allows you to track if a recipient clicked a link in your email.",properties:{enable:{type:"boolean",description:"Indicates if this setting is enabled."},enableText:{type:"boolean",description:"Indicates if this setting should be included in the `text/plain` portion of your email."}}},openTracking:{type:"object",description:"Allows you to track if the email was opened by including a single pixel image in the body of the content. When the pixel is loaded, Twilio SendGrid can log that the email was opened.",properties:{enable:{type:"boolean",description:"Indicates if this setting is enabled."},substitutionTag:{type:"string",description:"Allows you to specify a substitution tag that you can insert in the body of your email at a location that you desire. This tag will be replaced by the open tracking pixel."}}},subscriptionTracking:{type:"object",description:"Allows you to insert a subscription management link at the bottom of the text and HTML bodies of your email. If you would like to specify the location of the link within your email, you may use the `substitutionTag`.",properties:{enable:{type:"boolean",description:"Indicates if this setting is enabled."},text:{type:"string",description:"Text to be appended to the email with the subscription tracking link. You may control where the link is by using the tag <% %>"},html:{type:"string",description:"HTML to be appended to the email with the subscription tracking link. You may control where the link is by using the tag <% %>"},substitutionTag:{type:"string",description:"A tag that will be replaced with the unsubscribe URL. for example: `[unsubscribe_url]`. If this parameter is used, it will override both the `text` and `html` parameters. The URL of the link will be placed at the substitution tag\u2019s location with no additional formatting."}}},ganalytics:{type:"object",description:"Allows you to enable tracking provided by Google Analytics.",properties:{enable:{type:"boolean",description:"Indicates if this setting is enabled."},utmSource:{type:"string",description:"Name of the referrer source. (e.g. Google, SomeDomain.com, or Marketing Email)"},utmMedium:{type:"string",description:"Name of the marketing medium. (e.g. Email)"},utmTerm:{type:"string",description:"Used to identify any paid keywords."},utmContent:{type:"string",description:"Used to differentiate your campaign from advertisements."},utmCampaign:{type:"string",description:"The name of the campaign."}}}}}},required:[],additionalProperties:!1},st={output:Jt};var at={[shared.EmailProviderIdEnum.Braze]:l,[shared.EmailProviderIdEnum.Clickatell]:l,[shared.EmailProviderIdEnum.CustomSMTP]:ot,[shared.EmailProviderIdEnum.EmailJS]:l,[shared.EmailProviderIdEnum.EmailWebhook]:l,[shared.EmailProviderIdEnum.Infobip]:l,[shared.EmailProviderIdEnum.MailerSend]:l,[shared.EmailProviderIdEnum.Mailgun]:it,[shared.EmailProviderIdEnum.Mailjet]:nt,[shared.EmailProviderIdEnum.Mailtrap]:l,[shared.EmailProviderIdEnum.Mandrill]:l,[shared.EmailProviderIdEnum.NetCore]:l,[shared.EmailProviderIdEnum.Novu]:rt,[shared.EmailProviderIdEnum.Outlook365]:l,[shared.EmailProviderIdEnum.Plunk]:l,[shared.EmailProviderIdEnum.Postmark]:l,[shared.EmailProviderIdEnum.Resend]:l,[shared.EmailProviderIdEnum.SendGrid]:st,[shared.EmailProviderIdEnum.Sendinblue]:l,[shared.EmailProviderIdEnum.SES]:l,[shared.EmailProviderIdEnum.SparkPost]:l};var Zt={type:"object",properties:{},required:[],additionalProperties:!1},ct={output:Zt};var lt={[shared.InAppProviderIdEnum.Novu]:ct};var pt={anyOf:[{type:"string"},{type:"object",additionalProperties:!0,properties:{name:{type:"string"},volume:{type:"number"},critical:{type:"number"}},required:["name","volume","critical"]}]},ei={type:"object",properties:{topic:{type:"string",description:"The destination topic for the notification."},id:{type:"string",description:"A UUID to identify the notification with APNS. If an id is not supplied, APNS will generate one automatically. If an error occurs the response will contain the id. This property populates the apns-id header."},expiry:{type:"number",description:"A UNIX timestamp when the notification should expire. If the notification cannot be delivered to the device, APNS will retry until it expires. An expiry of 0 indicates that the notification expires immediately, therefore no retries will be attempted."},priority:{type:"number",description:`Provide one of the following values:

10 - The push notification is sent to the device immediately. (Default)
The push notification must trigger an alert, sound, or badge on the device. It is an error to use this priority for a push notification that contains only the content-available key.

5 - The push message is sent at a time that conserves power on the device receiving it.`},collapseId:{type:"string"},pushType:{type:"string",enum:["background","alert","voip"],description:`The type of the notification. The value of this header is alert or background. Specify alert when the delivery of your notification displays an alert, plays a sound, or badges your app's icon. Specify background for silent notifications that do not interact with the user.

The value of this header must accurately reflect the contents of your notification's payload. If there is a mismatch, or if the header is missing on required systems, APNs may delay the delivery of the notification or drop it altogether.`},threadId:{type:"string"},payload:{type:"object",additionalProperties:!0},aps:{type:"object",additionalProperties:!0,properties:{badge:{type:"number"},sound:pt,category:{type:"string"},contentAvailable:{type:"number"},launchImage:{type:"number"},mutableContent:{type:"number"},urlArgs:{type:"array",items:{type:"string"}}}},rawPayload:{type:"object",additionalProperties:!0},badge:{type:"number"},sound:pt,alert:{anyOf:[{type:"string"},{type:"object",additionalProperties:!0,properties:{title:{type:"string"},body:{type:"string"},subtitle:{type:"string"},titleLocKey:{type:"string"},titleLocArgs:{type:"array",items:{type:"string"}},actionLocKey:{type:"string"},locKey:{type:"string"},locArgs:{type:"array",items:{type:"string"}},launchImage:{type:"string"}},required:["body"]}]},contentAvailable:{type:"boolean"},mutableContent:{type:"boolean"},mdm:{anyOf:[{type:"string"},{type:"object",additionalProperties:!0}]},urlArgs:{type:"array",items:{type:"string"}}},required:[],additionalProperties:!0},dt={output:ei};var ti={type:"object",properties:{to:{anyOf:[{type:"string"},{type:"array",items:{type:"string"}}],description:"An Expo push token or an array of Expo push tokens specifying the recipient(s) of this message."},data:{type:"object",additionalProperties:!0,description:'A JSON object delivered to your app. It may be up to about 4KiB; the total notification payload sent to Apple and Google must be at most 4KiB or else you will get a "Message Too Big" error.'},title:{type:"string",description:"The title to display in the notification. Often displayed above the notification body."},subtitle:{type:"string",description:"The subtitle to display in the notification below the title."},body:{type:"string",description:"The message to display in the notification."},sound:{anyOf:[{type:"string"},{type:"null"},{type:"object",properties:{name:{anyOf:[{type:"string",enum:["default"]},{type:"null"}]},volume:{type:"number"},critical:{type:"boolean"}},additionalProperties:!0}],description:"Play a sound when the recipient receives this notification. Specify default to play the device's default notification sound, or omit this field to play no sound. Custom sounds are not supported."},ttl:{type:"number",description:"Time to Live: the number of seconds for which the message may be kept around for redelivery if it hasn't been delivered yet. Defaults to undefined to use the respective defaults of each provider (2419200 (4 weeks) for Android/FCM and 0 for iOS/APNs)."},expiration:{type:"number",description:"Timestamp since the Unix epoch specifying when the message expires. Same effect as ttl (ttl takes precedence over expiration)."},priority:{type:"string",enum:["default","normal","high"],description:'The delivery priority of the message. Specify default or omit this field to use the default priority on each platform ("normal" on Android and "high" on iOS).'},badge:{type:"number",description:"Number to display in the badge on the app icon. Specify zero to clear the badge."},channelId:{type:"string",description:"ID of the Notification Channel through which to display this notification. If an ID is specified but the corresponding channel does not exist on the device (that has not yet been created by your app), the notification will not be displayed to the user."},categoryId:{type:"string",description:"ID of the notification category that this notification is associated with."},mutableContent:{type:"boolean",description:"Specifies whether this notification can be intercepted by the client app. In Expo Go, this defaults to true, and if you change that to false, you may experience issues. In standalone and bare apps, this defaults to false."}},required:[],additionalProperties:!0},ut={output:ti};var ii={type:"object",properties:{to:{description:`This parameter specifies the recipient of a message.
The value must be a registration token, notification key, or topic. Do not set this field when sending to multiple topics. See **condition**.
`,type:"string"},registrationIds:{description:`This parameter specifies a list of devices (registration tokens, or IDs) receiving a multicast message. It must contain at least 1 and at most 1000 registration tokens.
Use this parameter only for multicast messaging, not for single recipients. Multicast messages (sending to more than 1 registration tokens) are allowed using HTTP JSON format only.
`,type:"array",items:{type:"string"}},condition:{description:`This parameter specifies a logical expression of conditions that determine the message target.
Supported condition: Topic, formatted as yourTopic in topics. This value is case-insensitive.
Supported operators: &&, ||. Maximum two operators per topic message supported.
`,type:"string"},notificationKey:{description:`This parameter is deprecated. Instead, use **to** to specify message recipients. For more information on how to send messages to multiple devices using **to**, see [Device Group Messaging](https://firebase.google.com/docs/cloud-messaging/notifications).
`,type:"string"},collapseKey:{description:'This parameter identifies a group of messages (e.g., with ```"collapseKey": "Updates Available"```) that can be collapsed, so that only the last message gets sent when delivery can be resumed. This is intended to avoid sending too many of the same messages when the device comes back online or becomes active (see **delayWhileIdle**).\nNote that there is no guarantee of the order in which messages get sent.\nNote: A maximum of 4 different collapse keys is allowed at any given time. This means a FCM connection server can simultaneously store 4 different send-to-sync messages per client app. If you exceed this number, there is no guarantee which 4 collapse keys the FCM connection server will keep.\n',type:"string"},priority:{description:`Sets the priority of the message. Valid values are normal and high. On iOS, these correspond to APNs priorities 5 and 10.
By default, messages are sent with normal priority. Normal priority optimizes the client app's battery consumption and should be used unless immediate delivery is required. For messages with normal priority, the app may receive the message with unspecified delay.
When a message is sent with high priority, it is sent immediately, and the app can wake a sleeping device and open a network connection to your server.For more information, see [Setting the priority of a message](https://firebase.google.com/docs/cloud-messaging/concept-options#setting-the-priority-of-a-message).
`,type:"string",enum:["normal","high"]},contentAvailable:{description:"On iOS, use this field to represent **content-available** in the APNS payload. When a notification or message is sent and this is set to ```true```, an inactive client app is awoken. On Android, data messages wake the app by default. On Chrome, currently not supported.\n",type:"boolean"},mutableContent:{description:`Currently for iOS 10+ devices only. On iOS, use this field to represent mutable-content in the APNS payload. When a notification is sent and this is set to true, the content of the notification can be modified before it is displayed, using a [Notification Service app extension](https://developer.apple.com/reference/usernotifications/unnotificationserviceextension). This parameter will be ignored for Android and web.
`,type:"boolean"},delayWhileIdle:{description:"When this parameter is set to ```true```, it indicates that the message should not be sent until the device becomes active.\nThe default value is ```false```.\n",type:"boolean"},timeToLive:{description:`This parameter specifies how long (in seconds) the message should be kept in FCM storage if the device is offline. The maximum time to live supported is 4 weeks, and the default value is 4 weeks. For more information, see [Setting the lifespan of a message](https://firebase.google.com/docs/cloud-messaging/concept-options#ttl).
`,type:"number"},restrictedPackageName:{description:`This parameter specifies the package name of the application where the registration tokens must match in order to receive the message.
`,type:"string"},dryRun:{description:"This parameter, when set to ```true```, allows developers to test a request without actually sending a message.\nThe default value is ```false```.\n",type:"boolean"},data:{description:'This parameter specifies the custom key-value pairs of the message\'s payload.\nFor example, with ```"data":{"score":"3x1"}```:\nOn iOS, if the message is sent via APNS, it represents the custom data fields. If it is sent via FCM connection server, it would be represented as key value dictionary in ```AppDelegate application:didReceiveRemoteNotification:```.\nOn Android, this would result in an intent extra named **score** with the string value **3x1**.\nThe key should not be a reserved word ("from" or any word starting with "google" or "gcm"). Do not use any of the words defined in this table (such as **collapseKey**).\n',type:"object",additionalProperties:{type:"string"}},notification:{description:`Notification payload. For more information about notification message and data message options, see [Payload](https://firebase.google.com/docs/cloud-messaging/concept-options#notifications_and_data_messages).
`,type:"object",properties:{title:{description:"Indicates notification title. This field is not visible on iOS phones and tablets. Field is required for android.",type:"string"},body:{description:"Indicates notification body text.",type:"string"},icon:{description:"android: Indicates notification icon. Sets value to **myicon** for drawable resource **myicon**.",type:"string"},sound:{description:`Indicates a sound to play when the device receives a notification.
* iOS: Sound files can be in the main bundle of the client app or in the Library/Sounds folder of the app's data container. See the [iOS Developer Library](https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Chapters/IPhoneOSClientImp.html#//apple_ref/doc/uid/TP40008194-CH103-SW6) for more information).
* android: Supports default or the filename of a sound resource bundled in the app. Sound files must reside in /res/raw/.
`,type:"string"},badge:{description:"iOS: Indicates the badge on the client app home icon.",type:"string"},tag:{description:`android: Indicates whether each notification results in a new entry in the notification drawer.
If not set, each request creates a new notification.
If set, and a notification with the same tag is already being shown, the new notification replaces the existing one in the notification drawer.
`,type:"string"},color:{description:"android: Indicates color of the icon, expressed in #rrggbb format",type:"string"},clickAction:{description:`Indicates the action associated with a user click on the notification.
* iOS:  Corresponds to category in the APNs payload.
* android: When this is set, an activity with a matching intent filter is launched when user clicks the notification.
`,type:"string"},bodyLocKey:{description:`Indicates the key to the body string for localization.
* iOS: Corresponds to "loc-key" in the APNs payload.
* android: Use the key in the app's string resources when populating this value.
`,type:"string"},bodyLocArgs:{description:`Indicates the string value to replace format specifiers in the body string for localization.
* iOS: Corresponds to "loc-args" in the APNs payload.
* android:  See [Formatting and Styling](https://developer.android.com/guide/topics/resources/string-resource.html#FormattingAndStyling).
`,type:"string"},titleLocKey:{description:`Indicates the key to the title string for localization.
* iOS: Corresponds to "title-loc-key" in the APNs payload.
* android:  Use the key in the app's string resources when populating this value.
`,type:"string"},titleLocArgs:{description:`Indicates the string value to replace format specifiers in the title string for localization.
* iOS: Corresponds to "title-loc-args" in the APNs payload.
* android: See [Formatting strings](https://developer.android.com/guide/topics/resources/string-resource.html#FormattingAndStyling).
`,type:"string"}}}},required:[],additionalProperties:!0},ht={output:ii};var ni={allOf:[{allOf:[{anyOf:[{type:"object",properties:{includedSegments:{type:"array",description:`The segment names you want to target. Users in these segments will receive a notification. This targeting parameter is only compatible with excludedSegments.
Example: ["Active Users", "Inactive Users"]
`,items:{type:"string"}},excludedSegments:{type:"array",description:`Segment that will be excluded when sending. Users in these segments will not receive a notification, even if they were included in includedSegments. This targeting parameter is only compatible with includedSegments.
Example: ["Active Users", "Inactive Users"]
`,items:{type:"string"}}}},{type:"object",properties:{includePlayerIds:{type:"array",description:`Specific playerids to send your notification to. _Does not require API Auth Key.
Do not combine with other targeting parameters. Not compatible with any other targeting parameters.
Example: ["1dd608f2-c6a1-11e3-851d-000c2940e62c"]
Limit of 2,000 entries per REST API call
`,items:{type:"string"},nullable:!0},includeExternalUserIds:{type:"array",description:`Target specific devices by custom user IDs assigned via API.
Not compatible with any other targeting parameters
Example: ["custom-id-assigned-by-api"]
REQUIRED: REST API Key Authentication
Limit of 2,000 entries per REST API call.
Note: If targeting push, email, or sms subscribers with same ids, use with channelForExternalUserIds to indicate you are sending a push or email or sms.
`,items:{type:"string"},nullable:!0},includeEmailTokens:{type:"array",description:`Recommended for Sending Emails - Target specific email addresses.
If an email does not correspond to an existing user, a new user will be created.
Example: nick@catfac.ts
Limit of 2,000 entries per REST API call
`,items:{type:"string"}},includePhoneNumbers:{type:"array",description:`Recommended for Sending SMS - Target specific phone numbers. The phone number should be in the E.164 format. Phone number should be an existing subscriber on OneSignal. Refer our docs to learn how to add phone numbers to OneSignal.
Example phone number: +1999999999
Limit of 2,000 entries per REST API call
`,items:{type:"string"}},includeIosTokens:{type:"array",description:`Not Recommended: Please consider using includePlayerIds or includeExternalUserIds instead.
Target using iOS device tokens.
Warning: Only works with Production tokens.
All non-alphanumeric characters must be removed from each token. If a token does not correspond to an existing user, a new user will be created.
Example: ce777617da7f548fe7a9ab6febb56cf39fba6d38203...
Limit of 2,000 entries per REST API call
`,items:{type:"string"}},includeWpWnsUris:{type:"array",description:`Not Recommended: Please consider using includePlayerIds or includeExternalUserIds instead.
Target using Windows URIs. If a token does not correspond to an existing user, a new user will be created.
Example: http://s.notify.live.net/u/1/bn1/HmQAAACPaLDr-...
Limit of 2,000 entries per REST API call
`,items:{type:"string"}},includeAmazonRegIds:{type:"array",description:`Not Recommended: Please consider using includePlayerIds or includeExternalUserIds instead.
Target using Amazon ADM registration IDs. If a token does not correspond to an existing user, a new user will be created.
Example: amzn1.adm-registration.v1.XpvSSUk0Rc3hTVVV...
Limit of 2,000 entries per REST API call
`,items:{type:"string"}},includeChromeRegIds:{type:"array",description:`Not Recommended: Please consider using includePlayerIds or includeExternalUserIds instead.
Target using Chrome App registration IDs. If a token does not correspond to an existing user, a new user will be created.
Example: APA91bEeiUeSukAAUdnw3O2RB45FWlSpgJ7Ji_...
Limit of 2,000 entries per REST API call
`,items:{type:"string"}},includeChromeWebRegIds:{type:"array",description:`Not Recommended: Please consider using includePlayerIds or includeExternalUserIds instead.
Target using Chrome Web Push registration IDs. If a token does not correspond to an existing user, a new user will be created.
Example: APA91bEeiUeSukAAUdnw3O2RB45FWlSpgJ7Ji_...
Limit of 2,000 entries per REST API call
`,items:{type:"string"}},includeAndroidRegIds:{type:"array",description:`Not Recommended: Please consider using includePlayerIds or includeExternalUserIds instead.
Target using Android device registration IDs. If a token does not correspond to an existing user, a new user will be created.
Example: APA91bEeiUeSukAAUdnw3O2RB45FWlSpgJ7Ji_...
Limit of 2,000 entries per REST API call
`,items:{type:"string"}},includeAliases:{type:"object",properties:{aliasLabel:{type:"array",items:{type:"string"}}},nullable:!0},targetChannel:{type:"string",enum:["push","email","sms"]}}}]},{type:"object",properties:{id:{type:"string"},value:{type:"integer",readOnly:!0},name:{type:"string",description:`Required for SMS Messages.
An identifier for tracking message within the OneSignal dashboard or export analytics.
Not shown to end user.`,writeOnly:!0,nullable:!0},aggregation:{type:"string",enum:["sum","count"],readOnly:!0},isIos:{type:"boolean",description:"Indicates whether to send to all devices registered under your app's Apple iOS platform.",writeOnly:!0,nullable:!0},isAndroid:{type:"boolean",description:"Indicates whether to send to all devices registered under your app's Google Android platform.",writeOnly:!0,nullable:!0},isHuawei:{type:"boolean",description:"Indicates whether to send to all devices registered under your app's Huawei Android platform.",writeOnly:!0,nullable:!0},isAnyWeb:{type:"boolean",description:`Indicates whether to send to all subscribed web browser users, including Chrome, Firefox, and Safari.
You may use this instead as a combined flag instead of separately enabling isChromeWeb, isFirefox, and isSafari, though the three options are equivalent to this one.
`,writeOnly:!0,nullable:!0},isChromeWeb:{type:"boolean",writeOnly:!0,nullable:!0,description:"Indicates whether to send to all Google Chrome, Chrome on Android, and Mozilla Firefox users registered under your Chrome & Firefox web push platform."},isFirefox:{type:"boolean",writeOnly:!0,nullable:!0,description:"Indicates whether to send to all Mozilla Firefox desktop users registered under your Firefox web push platform."},isSafari:{type:"boolean",writeOnly:!0,nullable:!0,description:"Does not support iOS Safari. Indicates whether to send to all Apple's Safari desktop users registered under your Safari web push platform. Read more iOS Safari"},isWpWns:{type:"boolean",writeOnly:!0,nullable:!0,description:"Indicates whether to send to all devices registered under your app's Windows platform."},isAdm:{type:"boolean",writeOnly:!0,nullable:!0,description:"Indicates whether to send to all devices registered under your app's Amazon Fire platform."},isChrome:{type:"boolean",writeOnly:!0,nullable:!0,description:`This flag is not used for web push Please see isChromeWeb for sending to web push users. This flag only applies to Google Chrome Apps & Extensions.
Indicates whether to send to all devices registered under your app's Google Chrome Apps & Extension platform.
`},channelForExternalUserIds:{type:"string",writeOnly:!0,description:`Indicates if the message type when targeting with includeExternalUserIds for cases where an email, sms, and/or push subscribers have the same external user id.
Example: Use the string "push" to indicate you are sending a push notification or the string "email"for sending emails or "sms"for sending SMS.
`},appId:{type:"string",description:`Required: Your OneSignal Application ID, which can be found in Keys & IDs.
It is a UUID and looks similar to 8250eaf6-1a58-489e-b136-7c74a864b434.
`,writeOnly:!0},externalId:{type:"string",description:`Correlation and idempotency key.
A request received with this parameter will first look for another notification with the same externalId. If one exists, a notification will not be sent, and result of the previous operation will instead be returned. Therefore, if you plan on using this feature, it's important to use a good source of randomness to generate the UUID passed here.
This key is only idempotent for 30 days. After 30 days, the notification could be removed from our system and a notification with the same externalId will be sent again.
  See Idempotent Notification Requests for more details
writeOnly: true
`,nullable:!0},contents:{allOf:[{type:"object",properties:{en:{type:"string",description:"Text in English.  Will be used as a fallback"},ar:{type:"string",description:"Text in Arabic."},bs:{type:"string",description:"Text in Bosnian."},bg:{type:"string",description:"Text in Bulgarian."},ca:{type:"string",description:"Text in Catalan."},"zh-Hans":{type:"string",description:"Text in Chinese (Simplified)."},"zh-Hant":{type:"string",description:"Text in Chinese (Traditional)."},zh:{type:"string",description:"Alias for zh-Hans."},hr:{type:"string",description:"Text in Croatian."},cs:{type:"string",description:"Text in Czech."},da:{type:"string",description:"Text in Danish."},nl:{type:"string",description:"Text in Dutch."},et:{type:"string",description:"Text in Estonian."},fi:{type:"string",description:"Text in Finnish."},fr:{type:"string",description:"Text in French."},ka:{type:"string",description:"Text in Georgian."},de:{type:"string",description:"Text in German."},el:{type:"string",description:"Text in Greek."},hi:{type:"string",description:"Text in Hindi."},he:{type:"string",description:"Text in Hebrew."},hu:{type:"string",description:"Text in Hungarian."},id:{type:"string",description:"Text in Indonesian."},it:{type:"string",description:"Text in Italian."},ja:{type:"string",description:"Text in Japanese."},ko:{type:"string",description:"Text in Korean."},lv:{type:"string",description:"Text in Latvian."},lt:{type:"string",description:"Text in Lithuanian."},ms:{type:"string",description:"Text in Malay."},nb:{type:"string",description:"Text in Norwegian."},pl:{type:"string",description:"Text in Polish."},fa:{type:"string",description:"Text in Persian."},pt:{type:"string",description:"Text in Portuguese."},pa:{type:"string",description:"Text in Punjabi."},ro:{type:"string",description:"Text in Romanian."},ru:{type:"string",description:"Text in Russian."},sr:{type:"string",description:"Text in Serbian."},sk:{type:"string",description:"Text in Slovak."},es:{type:"string",description:"Text in Spanish."},sv:{type:"string",description:"Text in Swedish."},th:{type:"string",description:"Text in Thai."},tr:{type:"string",description:"Text in Turkish."},uk:{type:"string",description:"Text in Ukrainian."},vi:{type:"string",description:"Text in Vietnamese."}}},{description:`Required unless contentAvailable=true or templateId is set.
The message's content (excluding the title), a map of language codes to text for each language.
Each hash must have a language code string for a key, mapped to the localized text you would like users to receive for that language.
This field supports inline substitutions.
English must be included in the hash.
Example: {"en": "English Message", "es": "Spanish Message"}
`,writeOnly:!0}]},headings:{allOf:[{type:"object",properties:{en:{type:"string",description:"Text in English.  Will be used as a fallback"},ar:{type:"string",description:"Text in Arabic."},bs:{type:"string",description:"Text in Bosnian."},bg:{type:"string",description:"Text in Bulgarian."},ca:{type:"string",description:"Text in Catalan."},"zh-Hans":{type:"string",description:"Text in Chinese (Simplified)."},"zh-Hant":{type:"string",description:"Text in Chinese (Traditional)."},zh:{type:"string",description:"Alias for zh-Hans."},hr:{type:"string",description:"Text in Croatian."},cs:{type:"string",description:"Text in Czech."},da:{type:"string",description:"Text in Danish."},nl:{type:"string",description:"Text in Dutch."},et:{type:"string",description:"Text in Estonian."},fi:{type:"string",description:"Text in Finnish."},fr:{type:"string",description:"Text in French."},ka:{type:"string",description:"Text in Georgian."},de:{type:"string",description:"Text in German."},el:{type:"string",description:"Text in Greek."},hi:{type:"string",description:"Text in Hindi."},he:{type:"string",description:"Text in Hebrew."},hu:{type:"string",description:"Text in Hungarian."},id:{type:"string",description:"Text in Indonesian."},it:{type:"string",description:"Text in Italian."},ja:{type:"string",description:"Text in Japanese."},ko:{type:"string",description:"Text in Korean."},lv:{type:"string",description:"Text in Latvian."},lt:{type:"string",description:"Text in Lithuanian."},ms:{type:"string",description:"Text in Malay."},nb:{type:"string",description:"Text in Norwegian."},pl:{type:"string",description:"Text in Polish."},fa:{type:"string",description:"Text in Persian."},pt:{type:"string",description:"Text in Portuguese."},pa:{type:"string",description:"Text in Punjabi."},ro:{type:"string",description:"Text in Romanian."},ru:{type:"string",description:"Text in Russian."},sr:{type:"string",description:"Text in Serbian."},sk:{type:"string",description:"Text in Slovak."},es:{type:"string",description:"Text in Spanish."},sv:{type:"string",description:"Text in Swedish."},th:{type:"string",description:"Text in Thai."},tr:{type:"string",description:"Text in Turkish."},uk:{type:"string",description:"Text in Ukrainian."},vi:{type:"string",description:"Text in Vietnamese."}}},{description:`The message's title, a map of language codes to text for each language. Each hash must have a language code string for a key, mapped to the localized text you would like users to receive for that language.
This field supports inline substitutions.
Example: {"en": "English Title", "es": "Spanish Title"}
`,writeOnly:!0}]},subtitle:{allOf:[{type:"object",properties:{en:{type:"string",description:"Text in English.  Will be used as a fallback"},ar:{type:"string",description:"Text in Arabic."},bs:{type:"string",description:"Text in Bosnian."},bg:{type:"string",description:"Text in Bulgarian."},ca:{type:"string",description:"Text in Catalan."},"zh-Hans":{type:"string",description:"Text in Chinese (Simplified)."},"zh-Hant":{type:"string",description:"Text in Chinese (Traditional)."},zh:{type:"string",description:"Alias for zh-Hans."},hr:{type:"string",description:"Text in Croatian."},cs:{type:"string",description:"Text in Czech."},da:{type:"string",description:"Text in Danish."},nl:{type:"string",description:"Text in Dutch."},et:{type:"string",description:"Text in Estonian."},fi:{type:"string",description:"Text in Finnish."},fr:{type:"string",description:"Text in French."},ka:{type:"string",description:"Text in Georgian."},de:{type:"string",description:"Text in German."},el:{type:"string",description:"Text in Greek."},hi:{type:"string",description:"Text in Hindi."},he:{type:"string",description:"Text in Hebrew."},hu:{type:"string",description:"Text in Hungarian."},id:{type:"string",description:"Text in Indonesian."},it:{type:"string",description:"Text in Italian."},ja:{type:"string",description:"Text in Japanese."},ko:{type:"string",description:"Text in Korean."},lv:{type:"string",description:"Text in Latvian."},lt:{type:"string",description:"Text in Lithuanian."},ms:{type:"string",description:"Text in Malay."},nb:{type:"string",description:"Text in Norwegian."},pl:{type:"string",description:"Text in Polish."},fa:{type:"string",description:"Text in Persian."},pt:{type:"string",description:"Text in Portuguese."},pa:{type:"string",description:"Text in Punjabi."},ro:{type:"string",description:"Text in Romanian."},ru:{type:"string",description:"Text in Russian."},sr:{type:"string",description:"Text in Serbian."},sk:{type:"string",description:"Text in Slovak."},es:{type:"string",description:"Text in Spanish."},sv:{type:"string",description:"Text in Swedish."},th:{type:"string",description:"Text in Thai."},tr:{type:"string",description:"Text in Turkish."},uk:{type:"string",description:"Text in Ukrainian."},vi:{type:"string",description:"Text in Vietnamese."}}},{description:`The message's subtitle, a map of language codes to text for each language. Each hash must have a language code string for a key, mapped to the localized text you would like users to receive for that language.
This field supports inline substitutions.
Example: {"en": "English Subtitle", "es": "Spanish Subtitle"}
`,writeOnly:!0}]},data:{type:"object",description:`Channel: Push Notifications
Platform: Huawei
A custom map of data that is passed back to your app. Same as using Additional Data within the dashboard. Can use up to 2048 bytes of data.
Example: {"abc": 123, "foo": "bar", "event_performed": true, "amount": 12.1}
`,writeOnly:!0,nullable:!0},huaweiMsgType:{type:"string",description:`Channel: Push Notifications
Platform: Huawei
Use "data" or "message" depending on the type of notification you are sending. More details in Data & Background Notifications.
`,writeOnly:!0,nullable:!0},url:{type:"string",description:`Channel: Push Notifications
Platform: All
The URL to open in the browser when a user clicks on the notification.
Note: iOS needs https or updated NSAppTransportSecurity in plist
This field supports inline substitutions.
Omit if including webUrl or appUrl
Example: https://onesignal.com
`,writeOnly:!0,nullable:!0},webUrl:{type:"string",description:`Channel: Push Notifications
Platform: All Browsers
Same as url but only sent to web push platforms.
Including Chrome, Firefox, Safari, Opera, etc.
Example: https://onesignal.com
`,writeOnly:!0,nullable:!0},appUrl:{type:"string",description:`Channel: Push Notifications
Platform: All Browsers
Same as url but only sent to web push platforms.
Including iOS, Android, macOS, Windows, ChromeApps, etc.
Example: https://onesignal.com
`,writeOnly:!0,nullable:!0},iosAttachments:{type:"object",description:`Channel: Push Notifications
Platform: iOS 10+
Adds media attachments to notifications. Set as JSON object, key as a media id of your choice and the value as a valid local filename or URL. User must press and hold on the notification to view.
Do not set mutableContent to download attachments. The OneSignal SDK does this automatically
Example: {"id1": "https://domain.com/image.jpg"}
`,writeOnly:!0,nullable:!0},templateId:{type:"string",description:`Channel: Push Notifications
Platform: All
Use a template you setup on our dashboard. The templateId is the UUID found in the URL when viewing a template on our dashboard.
Example: be4a8044-bbd6-11e4-a581-000c2940e62c
`,writeOnly:!0,nullable:!0},contentAvailable:{type:"boolean",description:`Channel: Push Notifications
Platform: iOS
Sending true wakes your app from background to run custom native code (Apple interprets this as content-available=1). Note: Not applicable if the app is in the "force-quit" state (i.e app was swiped away). Omit the contents field to prevent displaying a visible notification.
`,writeOnly:!0,nullable:!0},mutableContent:{type:"boolean",description:`Channel: Push Notifications
Platform: iOS 10+
Always defaults to true and cannot be turned off. Allows tracking of notification receives and changing of the notification content in your app before it is displayed. Triggers didReceive(_:withContentHandler:) on your UNNotificationServiceExtension.
`,writeOnly:!0},targetContentIdentifier:{type:"string",description:`Channel: Push Notifications
Platform: iOS 13+
Use to target a specific experience in your App Clip, or to target your notification to a specific window in a multi-scene App.
`,writeOnly:!0,nullable:!0},bigPicture:{type:"string",description:`Channel: Push Notifications
Platform: Android
Picture to display in the expanded view. Can be a drawable resource name or a URL.
`,writeOnly:!0,nullable:!0},huaweiBigPicture:{type:"string",description:`Channel: Push Notifications
Platform: Huawei
Picture to display in the expanded view. Can be a drawable resource name or a URL.
`,writeOnly:!0,nullable:!0},admBigPicture:{type:"string",description:`Channel: Push Notifications
Platform: Amazon
Picture to display in the expanded view. Can be a drawable resource name or a URL.
`,writeOnly:!0,nullable:!0},chromeBigPicture:{type:"string",description:`Channel: Push Notifications
Platform: ChromeApp
Large picture to display below the notification text. Must be a local URL.
`,writeOnly:!0,nullable:!0},chromeWebImage:{type:"string",description:`Channel: Push Notifications
Platform: Chrome 56+
Sets the web push notification's large image to be shown below the notification's title and text. Please see Web Push Notification Icons.
`,writeOnly:!0,nullable:!0},buttons:{type:"array",items:{type:"object",properties:{id:{type:"string"},text:{type:"string"},icon:{type:"string"}},required:["id"]},description:`Channel: Push Notifications
Platform: iOS 8.0+, Android 4.1+, and derivatives like Amazon Buttons to add to the notification. Icon only works for Android.
Buttons show in reverse order of array position i.e. Last item in array shows as first button on device.
Example: [{"id": "id2", "text": "second button", "icon": "ic_menu_share"}, {"id": "id1", "text": "first button", "icon": "ic_menu_send"}]
`,writeOnly:!0,nullable:!0},webButtons:{type:"array",items:{type:"object",properties:{id:{type:"string"},text:{type:"string"},icon:{type:"string"}},required:["id"]},description:`Channel: Push Notifications
Platform: Chrome 48+
Add action buttons to the notification. The id field is required.
Example: [{"id": "like-button", "text": "Like", "icon": "http://i.imgur.com/N8SN8ZS.png", "url": "https://yoursite.com"}, {"id": "read-more-button", "text": "Read more", "icon": "http://i.imgur.com/MIxJp1L.png", "url": "https://yoursite.com"}]
`,writeOnly:!0,nullable:!0},iosCategory:{type:"string",description:`Channel: Push Notifications
Platform: iOS
Category APS payload, use with registerUserNotificationSettings:categories in your Objective-C / Swift code.
Example: calendar category which contains actions like accept and decline
iOS 10+ This will trigger your UNNotificationContentExtension whose ID matches this category.
`,writeOnly:!0,nullable:!0},androidChannelId:{type:"string",description:`Channel: Push Notifications
Platform: Android
The Android Oreo Notification Category to send the notification under. See the Category documentation on creating one and getting it's id.
`,writeOnly:!0},huaweiChannelId:{type:"string",description:`Channel: Push Notifications
Platform: Huawei
The Android Oreo Notification Category to send the notification under. See the Category documentation on creating one and getting it's id.
`,writeOnly:!0,nullable:!0},existingAndroidChannelId:{type:"string",description:`Channel: Push Notifications
Platform: Android
Use this if you have client side Android Oreo Channels you have already defined in your app with code.
`,writeOnly:!0},huaweiExistingChannelId:{type:"string",description:`Channel: Push Notifications
Platform: Huawei
Use this if you have client side Android Oreo Channels you have already defined in your app with code.
`,writeOnly:!0,nullable:!0},androidBackgroundLayout:{type:"object",description:`Channel: Push Notifications
Platform: Android
Allowing setting a background image for the notification. This is a JSON object containing the following keys. See our Background Image documentation for image sizes.
`,properties:{image:{type:"string",description:"Asset file, android resource name, or URL to remote image."},headingsColor:{type:"string",description:'Title text color ARGB Hex format. Example(Blue) "FF0000FF".'},contentsColor:{type:"string",description:'Body text color ARGB Hex format. Example(Red) "FFFF0000".'}},writeOnly:!0},smallIcon:{type:"string",description:`Channel: Push Notifications
Platform: Android
Icon shown in the status bar and on the top left of the notification.
If not set a bell icon will be used or ic_stat_onesignal_default if you have set this resource name.
See: How to create small icons
`,writeOnly:!0,nullable:!0},huaweiSmallIcon:{type:"string",description:`Channel: Push Notifications
Platform: Huawei
Icon shown in the status bar and on the top left of the notification.
Use an Android resource path (E.g. /drawable/smallIcon).
Defaults to your app icon if not set.
`,writeOnly:!0,nullable:!0},largeIcon:{type:"string",description:`Channel: Push Notifications
Platform: Android
Can be a drawable resource name or a URL.
See: How to create large icons
`,writeOnly:!0,nullable:!0},huaweiLargeIcon:{type:"string",description:`Channel: Push Notifications
Platform: Huawei
Can be a drawable resource name or a URL.
See: How to create large icons
`,writeOnly:!0,nullable:!0},admSmallIcon:{type:"string",description:`Channel: Push Notifications
Platform: Amazon
If not set a bell icon will be used or ic_stat_onesignal_default if you have set this resource name.
See: How to create small icons
`,writeOnly:!0,nullable:!0},admLargeIcon:{type:"string",description:`Channel: Push Notifications
Platform: Amazon
If blank the smallIcon is used. Can be a drawable resource name or a URL.
See: How to create large icons
`,writeOnly:!0,nullable:!0},chromeWebIcon:{type:"string",description:`Channel: Push Notifications
Platform: Chrome
Sets the web push notification's icon. An image URL linking to a valid image. Common image types are supported; GIF will not animate. We recommend 256x256 (at least 80x80) to display well on high DPI devices. Firefox will also use this icon, unless you specify firefoxIcon.
`,nullable:!0},chromeWebBadge:{type:"string",description:`Channel: Push Notifications
Platform: Chrome
Sets the web push notification icon for Android devices in the notification shade. Please see Web Push Notification Badge.
`,writeOnly:!0,nullable:!0},firefoxIcon:{type:"string",description:`Channel: Push Notifications
Platform: Firefox
Not recommended Few people need to set Firefox-specific icons. We recommend setting chromeWebIcon instead, which Firefox will also use.
Sets the web push notification's icon for Firefox. An image URL linking to a valid image. Common image types are supported; GIF will not animate. We recommend 256x256 (at least 80x80) to display well on high DPI devices.
`,writeOnly:!0,nullable:!0},chromeIcon:{type:"string",description:`Channel: Push Notifications
Platform: ChromeApp
This flag is not used for web push For web push, please see chromeWebIcon instead.
The local URL to an icon to use. If blank, the app icon will be used.
`,writeOnly:!0,nullable:!0},iosSound:{type:"string",description:`Channel: Push Notifications
Platform: iOS
Sound file that is included in your app to play instead of the default device notification sound. Pass nil to disable vibration and sound for the notification.
Example: "notification.wav"
`,writeOnly:!0,nullable:!0},androidSound:{type:"string",description:`Channel: Push Notifications
Platform: Android
&#9888;&#65039;Deprecated, this field doesn't work on Android 8 (Oreo) and newer devices!
Please use Notification Categories / Channels noted above instead to support ALL versions of Android.
Sound file that is included in your app to play instead of the default device notification sound. Pass nil to disable sound for the notification.
NOTE: Leave off file extension for Android.
Example: "notification"
`,writeOnly:!0,nullable:!0},huaweiSound:{type:"string",description:`Channel: Push Notifications
Platform: Huawei
&#9888;&#65039;Deprecated, this field ONLY works on EMUI 5 (Android 7 based) and older devices.
Please also set Notification Categories / Channels noted above to support EMUI 8 (Android 8 based) devices.
Sound file that is included in your app to play instead of the default device notification sound. NOTE: Leave off file extension for and include the full path.

Example: "/res/raw/notification"
`,writeOnly:!0,nullable:!0},admSound:{type:"string",description:`Channel: Push Notifications
Platform: Amazon
&#9888;&#65039;Deprecated, this field doesn't work on Android 8 (Oreo) and newer devices!
Please use Notification Categories / Channels noted above instead to support ALL versions of Android.
Sound file that is included in your app to play instead of the default device notification sound. Pass nil to disable sound for the notification.
NOTE: Leave off file extension for Android.
Example: "notification"
`,writeOnly:!0,nullable:!0},wpWnsSound:{type:"string",description:`Channel: Push Notifications
Platform: Windows
Sound file that is included in your app to play instead of the default device notification sound.
Example: "notification.wav"
`,writeOnly:!0,nullable:!0},androidLedColor:{type:"string",description:`Channel: Push Notifications
Platform: Android
&#9888;&#65039;Deprecated, this field doesn't work on Android 8 (Oreo) and newer devices!
Please use Notification Categories / Channels noted above instead to support ALL versions of Android.
Sets the devices LED notification light if the device has one. ARGB Hex format.
Example(Blue): "FF0000FF"
`,writeOnly:!0,nullable:!0},huaweiLedColor:{type:"string",description:`Channel: Push Notifications
Platform: Huawei
&#9888;&#65039;Deprecated, this field ONLY works on EMUI 5 (Android 7 based) and older devices.
Please also set Notification Categories / Channels noted above to support EMUI 8 (Android 8 based) devices.
Sets the devices LED notification light if the device has one. RGB Hex format.
Example(Blue): "0000FF"
`,writeOnly:!0,nullable:!0},androidAccentColor:{type:"string",description:`Channel: Push Notifications
Platform: Android
Sets the background color of the notification circle to the left of the notification text. Only applies to apps targeting Android API level 21+ on Android 5.0+ devices.
Example(Red): "FFFF0000"
`,writeOnly:!0,nullable:!0},huaweiAccentColor:{type:"string",description:`Channel: Push Notifications
Platform: Huawei
Accent Color used on Action Buttons and Group overflow count.
Uses RGB Hex value (E.g. #9900FF).
Defaults to device's theme color if not set.
`,writeOnly:!0,nullable:!0},androidVisibility:{type:"integer",description:`Channel: Push Notifications
Platform: Android 5.0_
&#9888;&#65039;Deprecated, this field doesn't work on Android 8 (Oreo) and newer devices!
Please use Notification Categories / Channels noted above instead to support ALL versions of Android.
1 = Public (default) (Shows the full message on the lock screen unless the user has disabled all notifications from showing on the lock screen. Please consider the user and mark private if the contents are.)
0 = Private (Hides message contents on lock screen if the user set "Hide sensitive notification content" in the system settings)
-1 = Secret (Notification does not show on the lock screen at all)
`,writeOnly:!0,nullable:!0},huaweiVisibility:{type:"integer",nullable:!0,description:`Channel: Push Notifications
Platform: Huawei
&#9888;&#65039;Deprecated, this field ONLY works on EMUI 5 (Android 7 based) and older devices.
Please also set Notification Categories / Channels noted above to support EMUI 8 (Android 8 based) devices.
1 = Public (default) (Shows the full message on the lock screen unless the user has disabled all notifications from showing on the lock screen. Please consider the user and mark private if the contents are.)
0 = Private (Hides message contents on lock screen if the user set "Hide sensitive notification content" in the system settings)
-1 = Secret (Notification does not show on the lock screen at all)
`,writeOnly:!0},iosBadgeType:{type:"string",description:"Channel: Push Notifications\nPlatform: iOS\nDescribes whether to set or increase/decrease your app's iOS badge count by the iosBadgeCount specified count. Can specify None, SetTo, or Increase.\n`None` leaves the count unaffected.\n`SetTo` directly sets the badge count to the number specified in iosBadgeCount.\n`Increase` adds the number specified in iosBadgeCount to the total. Use a negative number to decrease the badge count.\n",writeOnly:!0,nullable:!0},iosBadgeCount:{type:"integer",nullable:!0,description:`Channel: Push Notifications
Platform: iOS
Used with iosBadgeType, describes the value to set or amount to increase/decrease your app's iOS badge count by.
You can use a negative number to decrease the badge count when used with an iosBadgeType of Increase.
`,writeOnly:!0},collapseId:{type:"string",description:`Channel: Push Notifications
Platform: iOS 10+, Android
Only one notification with the same id will be shown on the device. Use the same id to update an existing notification instead of showing a new one. Limit of 64 characters.
`,writeOnly:!0},webPushTopic:{type:"string",description:`Channel: Push Notifications
Platform: All Browsers
Display multiple notifications at once with different topics.
`,nullable:!0},apnsAlert:{type:"object",description:`Channel: Push Notifications
Platform: iOS 10+
iOS can localize push notification messages on the client using special parameters such as loc-key. When using the Create Notification endpoint, you must include these parameters inside of a field called apnsAlert. Please see Apple's guide on localizing push notifications to learn more.
`,writeOnly:!0,nullable:!0},delayedOption:{type:"string",description:`Channel: All
Possible values are:
timezone (Deliver at a specific time-of-day in each users own timezone)
last-active Same as Intelligent Delivery . (Deliver at the same time of day as each user last used your app).
If sendAfter is used, this takes effect after the sendAfter time has elapsed.
`,writeOnly:!0,nullable:!0},deliveryTimeOfDay:{type:"string",description:`Channel: All
Use with delayedOption=timezone.
Examples: "9:00AM"
"21:45"
"9:45:30"
`,writeOnly:!0,nullable:!0},ttl:{type:"integer",nullable:!0,description:`Channel: Push Notifications
Platform: iOS, Android, Chrome, Firefox, Safari, ChromeWeb
Time To Live - In seconds. The notification will be expired if the device does not come back online within this time. The default is 259,200 seconds (3 days).
Max value to set is 2419200 seconds (28 days).
`,writeOnly:!0},priority:{type:"integer",nullable:!0,description:`Channel: Push Notifications
Platform: Android, Chrome, ChromeWeb
Delivery priority through the push server (example GCM/FCM). Pass 10 for high priority or any other integer for normal priority. Defaults to normal priority for Android and high for iOS. For Android 6.0+ devices setting priority to high will wake the device out of doze mode.
`,writeOnly:!0},apnsPushTypeOverride:{type:"string",description:`Channel: Push Notifications
Platform: iOS
valid values: voip
Set the value to voip for sending VoIP Notifications
This field maps to the APNS header apns-push-type.
Note: alert and background are automatically set by OneSignal
`,writeOnly:!0},throttleRatePerMinute:{type:"string",description:`Channel: All
Apps with throttling enabled:
  - the parameter value will be used to override the default application throttling value set from the dashboard settings.
  - parameter value 0 indicates not to apply throttling to the notification.
  - if the parameter is not passed then the default app throttling value will be applied to the notification.
Apps with throttling disabled:
  - this parameter can be used to throttle delivery for the notification even though throttling is not enabled at the application level.
Refer to throttling for more details.
`,writeOnly:!0,nullable:!0},androidGroup:{type:"string",description:`Channel: Push Notifications
Platform: Android
Notifications with the same group will be stacked together using Android's Notification Grouping feature.
`,writeOnly:!0,nullable:!0},androidGroupMessage:{type:"string",description:`Channel: Push Notifications
Platform: Android
Note: This only works for Android 6 and older. Android 7+ allows full expansion of all message.
Summary message to display when 2+ notifications are stacked together. Default is "# new messages". Include $[notif_count] in your message and it will be replaced with the current number.
Languages - The value of each key is the message that will be sent to users for that language. "en" (English) is required. The key of each hash is either a a 2 character language code or one of zh-Hans/zh-Hant for Simplified or Traditional Chinese. Read more: supported languages.
Example: {"en": "You have $[notif_count] new messages"}
`,writeOnly:!0,nullable:!0},admGroup:{type:"string",description:`Channel: Push Notifications
Platform: Amazon
Notifications with the same group will be stacked together using Android's Notification Grouping feature.
`,writeOnly:!0,nullable:!0},admGroupMessage:{type:"object",description:`Channel: Push Notifications
Platform: Amazon
Summary message to display when 2+ notifications are stacked together. Default is "# new messages". Include $[notif_count] in your message and it will be replaced with the current number. "en" (English) is required. The key of each hash is either a a 2 character language code or one of zh-Hans/zh-Hant for Simplified or Traditional Chinese. The value of each key is the message that will be sent to users for that language.
Example: {"en": "You have $[notif_count] new messages"}
`,writeOnly:!0,nullable:!0},threadId:{type:"string",description:`Channel: Push Notifications
Platform: iOS 12+
This parameter is supported in iOS 12 and above. It allows you to group related notifications together.
If two notifications have the same thread-id, they will both be added to the same group.
`,writeOnly:!0,nullable:!0},summaryArg:{type:"string",description:`Channel: Push Notifications
Platform: iOS 12+
When using threadId to create grouped notifications in iOS 12+, you can also control the summary. For example, a grouped notification can say "12 more notifications from John Doe".
The summaryArg lets you set the name of the person/thing the notifications are coming from, and will show up as "X more notifications from summaryArg"
`,writeOnly:!0},summaryArgCount:{type:"integer",description:`Channel: Push Notifications
Platform: iOS 12+
When using threadId, you can also control the count of the number of notifications in the group. For example, if the group already has 12 notifications, and you send a new notification with summaryArgCount = 2, the new total will be 14 and the summary will be "14 more notifications from summaryArg"
`,writeOnly:!0},emailSubject:{type:"string",description:`Channel: Email
Required.  The subject of the email.
`,writeOnly:!0,nullable:!0},emailBody:{type:"string",description:`Channel: Email
Required unless templateId is set.
HTML suported
The body of the email you wish to send. Typically, customers include their own HTML templates here. Must include [unsubscribe_url] in an <a> tag somewhere in the email.
Note: any malformed HTML content will be sent to users. Please double-check your HTML is valid.
`,writeOnly:!0},emailFromName:{type:"string",description:`Channel: Email
The name the email is from. If not specified, will default to "from name" set in the OneSignal Dashboard Email Settings.
`,writeOnly:!0,nullable:!0},emailFromAddress:{type:"string",description:`Channel: Email
The email address the email is from. If not specified, will default to "from email" set in the OneSignal Dashboard Email Settings.
`,writeOnly:!0,nullable:!0},emailPreheader:{type:"string",description:`Channel: Email
The preheader text of the email.
Preheader is the preview text displayed immediately after an email subject that provides additional context about the email content.
If not specified, will default to null.
`,writeOnly:!0,nullable:!0},includeUnsubscribed:{type:"boolean",description:"Channel: Email\nDefault is `false`. This field is used to send transactional notifications. If set to `true`, this notification will also be sent to unsubscribed emails. If a `templateId` is provided, the `includeUnsubscribed` value from the template will be inherited. If you are using a third-party ESP, this field requires the ESP's list of unsubscribed emails to be cleared.",writeOnly:!0},smsFrom:{type:"string",description:`Channel: SMS
Phone Number used to send SMS. Should be a registered Twilio phone number in E.164 format.
`,writeOnly:!0,nullable:!0},smsMediaUrls:{type:"array",items:{type:"string"},description:`Channel: SMS
URLs for the media files to be attached to the SMS content.
Limit: 10 media urls with a total max. size of 5MBs.
`,writeOnly:!0,nullable:!0},filters:{type:"array",nullable:!0,items:{type:"object",properties:{field:{type:"string",description:"Name of the field to use as the first operand in the filter expression."},key:{type:"string",description:"If `field` is `tag`, this field is *required* to specify `key` inside the tags."},value:{type:"string",description:"Constant value to use as the second operand in the filter expression. This value is *required* when the relation operator is a binary operator."},relation:{type:"string",description:"Operator of a filter expression.",enum:[">","<","=","!=","exists","not_exists","time_elapsed_gt","time_elapsed_lt"]}},required:["field","relation"]}},customData:{type:"object",description:`Channel: All
JSON object that can be used as a source of message personalization data for fields that support tag variable substitution.
Push, SMS: Can accept up to 2048 bytes of valid JSON. Email: Can accept up to 10000 bytes of valid JSON.
Example: {"order_id": 123, "currency": "USD", "amount": 25}
`,writeOnly:!0,nullable:!0}}},{required:["appId"]}]},{type:"object",properties:{sendAfter:{type:"string",format:"date-time",description:`Channel: All
Schedule notification for future delivery. API defaults to UTC -1100
Examples: All examples are the exact same date & time.
"Thu Sep 24 2015 14:00:00 GMT-0700 (PDT)"
"September 24th 2015, 2:00:00 pm UTC-07:00"
"2015-09-24 14:00:00 GMT-0700"
"Sept 24 2015 14:00:00 GMT-0700"
"Thu Sep 24 2015 14:00:00 GMT-0700 (Pacific Daylight Time)"
Note: SMS currently only supports sendAfter parameter.
`,writeOnly:!0,nullable:!0}}}],required:[],additionalProperties:!0},mt={output:ni};var yt={[shared.PushProviderIdEnum.APNS]:dt,[shared.PushProviderIdEnum.EXPO]:ut,[shared.PushProviderIdEnum.FCM]:ht,[shared.PushProviderIdEnum.OneSignal]:mt,[shared.PushProviderIdEnum.PusherBeams]:l,[shared.PushProviderIdEnum.Pushpad]:l,[shared.PushProviderIdEnum.PushWebhook]:l};var oi={type:"object",properties:{},required:[],additionalProperties:!1},ft={output:oi};var ri={type:"object",properties:{to:{type:"string",pattern:"^\\+[1-9]\\d{1,14}$",description:"The recipient's phone number in [E.164](https://www.twilio.com/docs/glossary/what-e164) format (for SMS/MMS) or [channel address](https://www.twilio.com/docs/messaging/channels), e.g. `whatsapp:+15552229999`."},statusCallback:{type:"string",format:"uri",description:"The URL of the endpoint to which Twilio sends [Message status callback requests](https://www.twilio.com/docs/sms/api/message-resource#twilios-request-to-the-statuscallback-url). URL must contain a valid hostname and underscores are not allowed. If you include this parameter with the `messagingServiceSid`, Twilio uses this URL instead of the Status Callback URL of the [Messaging Service](https://www.twilio.com/docs/messaging/api/service-resource). "},applicationSid:{type:"string",minLength:34,maxLength:34,pattern:"^AP[0-9a-fA-F]{32}$",description:"The SID of the associated [TwiML Application](https://www.twilio.com/docs/usage/api/applications). [Message status callback requests](https://www.twilio.com/docs/sms/api/message-resource#twilios-request-to-the-statuscallback-url) are sent to the TwiML App's `statusCallback` URL. Note that the `statusCallback` parameter of a request takes priority over the `applicationSid` parameter; if both are included `applicationSid` is ignored."},maxPrice:{type:"number",description:"[OBSOLETE] This parameter will no longer have any effect as of 2024-06-03."},provideFeedback:{type:"boolean",description:"Boolean indicating whether or not you intend to provide delivery confirmation feedback to Twilio (used in conjunction with the [Message Feedback subresource](https://www.twilio.com/docs/sms/api/message-feedback-resource)). Default value is `false`."},attempt:{type:"integer",description:"Total number of attempts made (including this request) to send the message regardless of the provider used"},validityPeriod:{type:"integer",description:"The maximum length in seconds that the Message can remain in Twilio's outgoing message queue. If a queued Message exceeds the `validityPeriod`, the Message is not sent. Accepted values are integers from `1` to `36000`. Default value is `36000`. A `validityPeriod` greater than `5` is recommended. [Learn more about the validity period](https://www.twilio.com/blog/take-more-control-of-outbound-messages-using-validity-period-html)"},forceDelivery:{type:"boolean",description:"Reserved"},contentRetention:{type:"string",enum:["retain","discard"],description:"Determines if the message content can be stored or redacted based on privacy settings"},addressRetention:{type:"string",enum:["retain","obfuscate"],description:"Determines if the address can be stored or obfuscated based on privacy settings"},smartEncoded:{type:"boolean",description:"Whether to detect Unicode characters that have a similar GSM-7 character and replace them. Can be: `true` or `false`."},persistentAction:{type:"array",items:{type:"string"},description:"Rich actions for non-SMS/MMS channels. Used for [sending location in WhatsApp messages](https://www.twilio.com/docs/whatsapp/message-features#location-messages-with-whatsapp)."},shortenUrls:{type:"boolean",description:"For Messaging Services with [Link Shortening configured](https://www.twilio.com/docs/messaging/features/link-shortening) only: A Boolean indicating whether or not Twilio should shorten links in the `body` of the Message. Default value is `false`. If `true`, the `messagingServiceSid` parameter must also be provided."},scheduleType:{type:"string",enum:["fixed"],description:"For Messaging Services only: Include this parameter with a value of `fixed` in conjunction with the `sendAt` parameter in order to [schedule a Message](https://www.twilio.com/docs/messaging/features/message-scheduling)."},sendAt:{type:"string",format:"date-time",description:"The time that Twilio will send the message. Must be in ISO 8601 format."},sendAsMms:{type:"boolean",description:"If set to `true`, Twilio delivers the message as a single MMS message, regardless of the presence of media."},contentVariables:{type:"string",description:"For [Content Editor/API](https://www.twilio.com/docs/content) only: Key-value pairs of [Template variables](https://www.twilio.com/docs/content/using-variables-with-content-api) and their substitution values. `contentSid` parameter must also be provided. If values are not defined in the `contentVariables` parameter, the [Template's default placeholder values](https://www.twilio.com/docs/content/content-api-resources#create-templates) are used."},riskCheck:{type:"string",enum:["enable","disable"],description:"Include this parameter with a value of `disable` to skip any kind of risk check on the respective message request."},from:{type:"string",pattern:"^\\+[1-9]\\d{1,14}$",description:"The sender's Twilio phone number (in [E.164](https://en.wikipedia.org/wiki/E.164) format), [alphanumeric sender ID](https://www.twilio.com/docs/sms/quickstart), [Wireless SIM](https://www.twilio.com/docs/iot/wireless/programmable-wireless-send-machine-machine-sms-commands), [short code](https://www.twilio.com/en-us/messaging/channels/sms/short-codes), or [channel address](https://www.twilio.com/docs/messaging/channels) (e.g., `whatsapp:+15554449999`). The value of the `from` parameter must be a sender that is hosted within Twilio and belongs to the Account creating the Message. If you are using `messagingServiceSid`, this parameter can be empty (Twilio assigns a `from` value from the Messaging Service's Sender Pool) or you can provide a specific sender from your Sender Pool."},messagingServiceSid:{type:"string",minLength:34,maxLength:34,pattern:"^MG[0-9a-fA-F]{32}$",description:"The SID of the [Messaging Service](https://www.twilio.com/docs/messaging/services) you want to associate with the Message. When this parameter is provided and the `from` parameter is omitted, Twilio selects the optimal sender from the Messaging Service's Sender Pool. You may also provide a `from` parameter if you want to use a specific Sender from the Sender Pool."},body:{type:"string",description:"The text content of the outgoing message. Can be up to 1,600 characters in length. SMS only: If the `body` contains more than 160 [GSM-7](https://www.twilio.com/docs/glossary/what-is-gsm-7-character-encoding) characters (or 70 [UCS-2](https://www.twilio.com/docs/glossary/what-is-ucs-2-character-encoding) characters), the message is segmented and charged accordingly. For long `body` text, consider using the [sendAsMms parameter](https://www.twilio.com/blog/mms-for-long-text-messages)."},mediaUrl:{type:"array",items:{type:"string",format:"uri"},description:"The URL of media to include in the Message content. `jpeg`, `jpg`, `gif`, and `png` file types are fully supported by Twilio and content is formatted for delivery on destination devices. The media size limit is 5 MB for supported file types (`jpeg`, `jpg`, `png`, `gif`) and 500 KB for [other types](https://www.twilio.com/docs/messaging/guides/accepted-mime-types) of accepted media. To send more than one image in the message, provide multiple `mediaUrl` parameters in the POST request. You can include up to ten `mediaUrl` parameters per message. [International](https://support.twilio.com/hc/en-us/articles/223179808-Sending-and-receiving-MMS-messages) and [carrier](https://support.twilio.com/hc/en-us/articles/223133707-Is-MMS-supported-for-all-carriers-in-US-and-Canada-) limits apply."},contentSid:{type:"string",minLength:34,maxLength:34,pattern:"^HX[0-9a-fA-F]{32}$",description:"For [Content Editor/API](https://www.twilio.com/docs/content) only: The SID of the Content Template to be used with the Message, e.g., `HXXXXXXXXXXXXXXXXXXXXXXXXXXXXX`. If this parameter is not provided, a Content Template is not used. Find the SID in the Console on the Content Editor page. For Content API users, the SID is found in Twilio's response when [creating the Template](https://www.twilio.com/docs/content/content-api-resources#create-templates) or by [fetching your Templates](https://www.twilio.com/docs/content/content-api-resources#fetch-all-content-resources)."}},required:[],additionalProperties:!0},gt={output:ri};var wt={[shared.SmsProviderIdEnum.AfricasTalking]:l,[shared.SmsProviderIdEnum.AzureSms]:l,[shared.SmsProviderIdEnum.Bandwidth]:l,[shared.SmsProviderIdEnum.BrevoSms]:l,[shared.SmsProviderIdEnum.BulkSms]:l,[shared.SmsProviderIdEnum.BurstSms]:l,[shared.SmsProviderIdEnum.Clickatell]:l,[shared.SmsProviderIdEnum.Clicksend]:l,[shared.SmsProviderIdEnum.EazySms]:l,[shared.SmsProviderIdEnum.Firetext]:l,[shared.SmsProviderIdEnum.FortySixElks]:l,[shared.SmsProviderIdEnum.GenericSms]:l,[shared.SmsProviderIdEnum.Gupshup]:l,[shared.SmsProviderIdEnum.Infobip]:l,[shared.SmsProviderIdEnum.ISendSms]:l,[shared.SmsProviderIdEnum.Kannel]:l,[shared.SmsProviderIdEnum.Maqsam]:l,[shared.SmsProviderIdEnum.MessageBird]:l,[shared.SmsProviderIdEnum.Mobishastra]:l,[shared.SmsProviderIdEnum.Nexmo]:l,[shared.SmsProviderIdEnum.Novu]:ft,[shared.SmsProviderIdEnum.Plivo]:l,[shared.SmsProviderIdEnum.RingCentral]:l,[shared.SmsProviderIdEnum.Sendchamp]:l,[shared.SmsProviderIdEnum.Simpletexting]:l,[shared.SmsProviderIdEnum.Sms77]:l,[shared.SmsProviderIdEnum.SmsCentral]:l,[shared.SmsProviderIdEnum.SNS]:l,[shared.SmsProviderIdEnum.Telnyx]:l,[shared.SmsProviderIdEnum.Termii]:l,[shared.SmsProviderIdEnum.Twilio]:gt};var St={chat:tt,sms:wt,email:at,push:yt,in_app:lt};var si={type:"object",properties:{type:{enum:["regular"],default:"regular"},amount:{type:"number"},unit:{type:"string",enum:["seconds","minutes","hours","days","weeks","months"]}},required:["amount","unit"],additionalProperties:!1},ai={type:"object",properties:{duration:{type:"number"}},required:["duration"],additionalProperties:!1},J={output:si,result:ai};var ci={type:"object",properties:{amount:{type:"number"},unit:{type:"string",enum:["seconds","minutes","hours","days","weeks","months"]},digestKey:{type:"string"},lookBackWindow:{type:"object",properties:{amount:{type:"number"},unit:{type:"string",enum:["seconds","minutes","hours","days","weeks","months"]}},required:["amount","unit"],additionalProperties:!1}},required:["amount","unit"],additionalProperties:!1},li={type:"object",properties:{cron:{type:"string"},digestKey:{type:"string"}},required:["cron"],additionalProperties:!1},pi={oneOf:[ci,li]},di={type:"object",properties:{events:{type:"array",items:{type:"object",properties:{id:{type:"string"},time:{type:"string"},payload:{type:"object"}},required:["id","time","payload"],additionalProperties:!1}}},required:["events"],additionalProperties:!1},Z={output:pi,result:di};var ui={delay:J,digest:Z};var hi={type:"object",properties:{body:{type:"string"}},required:["body"],additionalProperties:!1},mi={type:"object",properties:{},required:[],additionalProperties:!1},bt={output:hi,result:mi};var yi={type:"object",properties:{subject:{type:"string"},body:{type:"string"}},required:["subject","body"],additionalProperties:!1},fi={type:"object",properties:{},required:[],additionalProperties:!1},Tt={output:yi,result:fi};var gi="^(?!mailto:)(?:(https?):\\/\\/[^\\s/$.?#].[^\\s]*)|^(\\/[^\\s]*)$",Ot={type:"object",properties:{url:{type:"string",pattern:gi},target:{type:"string",enum:["_self","_blank","_parent","_top","_unfencedTop"],default:"_blank"}},if:{properties:{url:{type:"string",pattern:"^/"}}},then:{properties:{target:{default:"_self"}}},else:{properties:{target:{default:"_blank"}}},required:["url"],additionalProperties:!1},vt={type:"object",properties:{label:{type:"string"},redirect:Ot},required:["label"],additionalProperties:!1},wi={type:"object",properties:{subject:{type:"string"},body:{type:"string"},avatar:{type:"string",format:"uri"},primaryAction:vt,secondaryAction:vt,data:{type:"object",additionalProperties:!0},redirect:Ot},required:["body"],additionalProperties:!1},Si={type:"object",properties:{seen:{type:"boolean"},read:{type:"boolean"},lastSeenDate:{type:"string",format:"date-time",nullable:!0},lastReadDate:{type:"string",format:"date-time",nullable:!0}},required:["seen","read","lastSeenDate","lastReadDate"],additionalProperties:!1},At={output:wi,result:Si};var bi={type:"object",properties:{subject:{type:"string"},body:{type:"string"}},required:["subject","body"],additionalProperties:!1},Ti={type:"object",properties:{},required:[],additionalProperties:!1},Et={output:bi,result:Ti};var vi={type:"object",properties:{body:{type:"string"}},required:["body"],additionalProperties:!1},Oi={type:"object",properties:{},required:[],additionalProperties:!1},Rt={output:vi,result:Oi};var O={chat:bt,sms:Rt,push:Et,email:Tt,in_app:At};var b={type:"object",properties:{},required:[],additionalProperties:!1};function G(n,e,t){if(n.steps.some(i=>i.stepId===e))throw new Ie(e);n.steps.push(t);}function Ye(n,e,t,i){return async(o,a,c={})=>{let p=c?.controlSchema||c?.inputSchema||b;return G(n,o,{stepId:o,type:e,inputs:{schema:y(p),unknownSchema:p},controls:{schema:y(p),unknownSchema:p},outputs:{schema:y(t),unknownSchema:t},results:{schema:y(i),unknownSchema:i},resolve:a,code:a.toString(),options:c,providers:[]}),{_ctx:{timestamp:Date.now(),state:{status:"pending",error:!1}}}}}function _t(n,e,t){let i=St[e];Object.entries(t).forEach(([o,a])=>{let c=i[o];n.providers.push({type:o,code:a.toString(),resolve:a,outputs:{schema:y(c.output),unknownSchema:c.output}});});}function $(n,e,t,i){return async(o,a,c={})=>{let p=c?.controlSchema||c?.inputSchema||b,d={stepId:o,type:e,inputs:{schema:y(p),unknownSchema:p},controls:{schema:y(p),unknownSchema:p},outputs:{schema:y(t),unknownSchema:t},results:{schema:y(i),unknownSchema:i},resolve:a,code:a.toString(),options:c,providers:[]};return G(n,o,d),Object.keys(c.providers||{}).length>0&&_t(d,e,c.providers||{}),{_ctx:{timestamp:Date.now(),state:{status:"pending",error:!1}}}}}function xt(n,e){return async(t,i,o={})=>{let a=o?.controlSchema||o?.inputSchema||b,c=o?.outputSchema||b;return G(n,t,{stepId:t,type:e,inputs:{schema:y(a),unknownSchema:a},controls:{schema:y(a),unknownSchema:a},outputs:{schema:y(c),unknownSchema:c},results:{schema:y(c),unknownSchema:c},resolve:i,code:i.toString(),options:o,providers:[]}),{_ctx:{timestamp:Date.now(),state:{status:"pending",error:!1}}}}}var Ai={email:shared.ChannelTypeEnum.EMAIL,sms:shared.ChannelTypeEnum.SMS,push:shared.ChannelTypeEnum.PUSH,inApp:shared.ChannelTypeEnum.IN_APP,chat:shared.ChannelTypeEnum.CHAT};function It(n){if(!n)return {};let e={};return n.all&&(e.all=n.all),Object.entries(n.channels||{}).forEach(([t,i])=>{let o=Ai[t];o&&(e.channels||(e.channels={}),e.channels[o]=i);}),e}function Pt(n){console.log(`
${m.bold(m.underline("Discovered workflowId:"))} '${n.workflowId}'`),n.steps.forEach((e,t)=>{let i=t===n.steps.length-1;console.log(`${i?"\u2514":"\u251C"} ${S.STEP} Discovered stepId: '${e.stepId}'	Type: '${e.type}'`),e.providers.forEach((a,c)=>{let p=c===e.providers.length-1;console.log(`${i?" ":"\u2502"} ${p?"\u2514":"\u251C"} ${S.PROVIDER} Discovered provider: '${a.type}'`);});});}function Ls(n,e,t){let i=t||{},o=ge(process.env.NOVU_SECRET_KEY),a=async p=>{if(!process.env.NOVU_SECRET_KEY)throw new be;let d=p.payload||{},f;if(i.payloadSchema){let P=await Me(i.payloadSchema,d);if(P.success===!1)throw new me(n,P.errors);f=P.data;}else f=p.payload;let T=await Xe(),I={name:n,to:p.to,payload:{...f},...p.transactionId&&{transactionId:p.transactionId},...p.overrides&&{overrides:p.overrides},...p.actor&&{actor:p.actor},...T&&{bridgeUrl:T}},A=await o.post("/events/trigger",I);return {cancel:async()=>o.delete(`/events/trigger/${A.transactionId}`),data:A}},c={workflowId:n,options:{...i,inputSchema:y(i.controlSchema||i.inputSchema||b),controlSchema:y(i.controlSchema||i.inputSchema||b),payloadSchema:y(i.payloadSchema||b)},steps:[],code:e.toString(),data:{schema:y(i.payloadSchema||b),unknownSchema:i.payloadSchema||b},payload:{schema:y(i.payloadSchema||b),unknownSchema:i.payloadSchema||b},inputs:{schema:y(i.controlSchema||i.inputSchema||b),unknownSchema:i.controlSchema||i.inputSchema||b},controls:{schema:y(i.controlSchema||i.inputSchema||b),unknownSchema:i.controlSchema||i.inputSchema||b},tags:i.tags||[],preferences:It(i.preferences),execute:e};return e({payload:{},subscriber:{},environment:{},controls:{},input:{},step:{push:$(c,"push",O.push.output,O.push.result),chat:$(c,"chat",O.chat.output,O.chat.result),email:$(c,"email",O.email.output,O.email.result),sms:$(c,"sms",O.sms.output,O.sms.result),inApp:$(c,"in_app",O.in_app.output,O.in_app.result),digest:Ye(c,"digest",Z.output,Z.result),delay:Ye(c,"delay",J.output,J.result),custom:xt(c,"custom")}}).then(()=>{Pt(c);}),{trigger:a,definition:c}}var Ei=(f=>(f.PENDING="pending",f.QUEUED="queued",f.RUNNING="running",f.COMPLETED="completed",f.FAILED="failed",f.DELAYED="delayed",f.CANCELED="canceled",f.MERGED="merged",f.SKIPPED="skipped",f))(Ei||{});

exports.ActionStepEnum = ze;
exports.ChannelStepEnum = F;
exports.Client = X;
exports.CronExpression = Dt;
exports.ErrorCodeEnum = E;
exports.FRAMEWORK_VERSION = oe;
exports.GetActionEnum = ee;
exports.HttpHeaderKeysEnum = Le;
exports.HttpMethodEnum = te;
exports.HttpQueryKeysEnum = Be;
exports.HttpStatusEnum = ie;
exports.JobStatusEnum = Ei;
exports.NovuApiEndpointsEnum = Ct;
exports.NovuRequestHandler = We;
exports.PostActionEnum = q;
exports.RETRYABLE_ERROR_STATUS_CODES = Ui;
exports.ResourceEnum = ne;
exports.SDK_VERSION = B;
exports.SIGNATURE_TIMESTAMP_TOLERANCE = qe;
exports.SIGNATURE_TIMESTAMP_TOLERANCE_MINUTES = $e;
exports.WorkflowChannelEnum = He;
exports.actionStepSchemas = ui;
exports.channelStepSchemas = O;
exports.workflow = Ls;
